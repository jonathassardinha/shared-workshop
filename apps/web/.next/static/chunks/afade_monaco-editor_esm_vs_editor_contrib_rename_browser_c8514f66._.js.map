{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/jloka/Documents/repos/personal/shared-workshop/node_modules/.pnpm/monaco-editor%400.52.2/node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { getBaseLayerHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { DeferredPromise, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isDefined } from '../../../../base/common/types.js';\nimport './renameWidget.css';\nimport * as domFontInfo from '../../../browser/config/domFontInfo.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { NewSymbolNameTag, NewSymbolNameTriggerKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, quickInputListFocusBackground, quickInputListFocusForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\n/** for debugging */\nconst _sticky = false;\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, nls.localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nexport const CONTEXT_RENAME_INPUT_FOCUSED = new RawContextKey('renameInputFocused', false, nls.localize('renameInputFocused', \"Whether the rename input widget is focused\"));\nlet RenameWidget = class RenameWidget {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService, _logService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._logService = _logService;\n        // implement IContentWidget\n        this.allowEditorOverflow = true;\n        this._disposables = new DisposableStore();\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._isEditingRenameCandidate = false;\n        this._nRenameSuggestionsInvocations = 0;\n        this._hadAutomaticRenameSuggestionsInvocation = false;\n        this._candidates = new Set();\n        this._beforeFirstInputFieldEditSW = new StopWatch();\n        this._inputWithButton = new InputWithButton();\n        this._disposables.add(this._inputWithButton);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._domNode.appendChild(this._inputWithButton.domNode);\n            this._renameCandidateListView = this._disposables.add(new RenameCandidateListView(this._domNode, {\n                fontInfo: this._editor.getOption(50 /* EditorOption.fontInfo */),\n                onFocusChange: (newSymbolName) => {\n                    this._inputWithButton.input.value = newSymbolName;\n                    this._isEditingRenameCandidate = false; // @ulugbekna: reset\n                },\n                onSelectionChange: () => {\n                    this._isEditingRenameCandidate = false; // @ulugbekna: because user picked a rename suggestion\n                    this.acceptInput(false); // we don't allow preview with mouse click for now\n                }\n            }));\n            this._disposables.add(this._inputWithButton.onDidInputChange(() => {\n                if (this._renameCandidateListView?.focusedCandidate !== undefined) {\n                    this._isEditingRenameCandidate = true;\n                }\n                this._timeBeforeFirstInputFieldEdit ??= this._beforeFirstInputFieldEditSW.elapsed();\n                if (this._renameCandidateProvidersCts?.token.isCancellationRequested === false) {\n                    this._renameCandidateProvidersCts.cancel();\n                }\n                this._renameCandidateListView?.clearFocus();\n            }));\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        if (!this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        const widgetBorderColor = theme.getColor(widgetBorder);\n        this._domNode.style.backgroundColor = String(theme.getColor(editorWidgetBackground) ?? '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.border = widgetBorderColor ? `1px solid ${widgetBorderColor}` : '';\n        this._domNode.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._inputWithButton.domNode.style.backgroundColor = String(theme.getColor(inputBackground) ?? '');\n        this._inputWithButton.input.style.backgroundColor = String(theme.getColor(inputBackground) ?? '');\n        this._inputWithButton.domNode.style.borderWidth = border ? '1px' : '0px';\n        this._inputWithButton.domNode.style.borderStyle = border ? 'solid' : 'none';\n        this._inputWithButton.domNode.style.borderColor = border?.toString() ?? 'none';\n    }\n    _updateFont() {\n        if (this._domNode === undefined) {\n            return;\n        }\n        assertType(this._label !== undefined, 'RenameWidget#_updateFont: _label must not be undefined given _domNode is defined');\n        this._editor.applyFontInfo(this._inputWithButton.input);\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n        this._label.style.fontSize = `${this._computeLabelFontSize(fontInfo.fontSize)}px`;\n    }\n    _computeLabelFontSize(editorFontSize) {\n        return editorFontSize * 0.8;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        if (!this._editor.hasModel() || // @ulugbekna: shouldn't happen\n            !this._editor.getDomNode() // @ulugbekna: can happen during tests based on suggestWidget's similar predicate check\n        ) {\n            return null;\n        }\n        const bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\n        const editorBox = dom.getDomNodePagePosition(this._editor.getDomNode());\n        const cursorBoxTop = this._getTopForPosition();\n        this._nPxAvailableAbove = cursorBoxTop + editorBox.top;\n        this._nPxAvailableBelow = bodyBox.height - this._nPxAvailableAbove;\n        const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n        const { totalHeight: candidateViewHeight } = RenameCandidateView.getLayoutInfo({ lineHeight });\n        const positionPreference = this._nPxAvailableBelow > candidateViewHeight * 6 /* approximate # of candidates to fit in (inclusive of rename input box & rename label) */\n            ? [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n            : [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */];\n        return {\n            position: this._position,\n            preference: positionPreference,\n        };\n    }\n    beforeRender() {\n        const [accept, preview] = this._acceptKeybindings;\n        this._label.innerText = nls.localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", this._keybindingService.lookupKeybinding(accept)?.getLabel(), this._keybindingService.lookupKeybinding(preview)?.getLabel());\n        this._domNode.style.minWidth = `200px`; // to prevent from widening when candidates come in\n        return null;\n    }\n    afterRender(position) {\n        // FIXME@ulugbekna: commenting trace log out until we start unmounting the widget from editor properly - https://github.com/microsoft/vscode/issues/226975\n        // this._trace('invoking afterRender, position: ', position ? 'not null' : 'null');\n        if (position === null) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true, 'afterRender (because position is null)');\n            return;\n        }\n        if (!this._editor.hasModel() || // shouldn't happen\n            !this._editor.getDomNode() // can happen during tests based on suggestWidget's similar predicate check\n        ) {\n            return;\n        }\n        assertType(this._renameCandidateListView);\n        assertType(this._nPxAvailableAbove !== undefined);\n        assertType(this._nPxAvailableBelow !== undefined);\n        const inputBoxHeight = dom.getTotalHeight(this._inputWithButton.domNode);\n        const labelHeight = dom.getTotalHeight(this._label);\n        let totalHeightAvailable;\n        if (position === 2 /* ContentWidgetPositionPreference.BELOW */) {\n            totalHeightAvailable = this._nPxAvailableBelow;\n        }\n        else {\n            totalHeightAvailable = this._nPxAvailableAbove;\n        }\n        this._renameCandidateListView.layout({\n            height: totalHeightAvailable - labelHeight - inputBoxHeight,\n            width: dom.getTotalWidth(this._inputWithButton.domNode),\n        });\n    }\n    acceptInput(wantsPreview) {\n        this._trace(`invoking acceptInput`);\n        this._currentAcceptInput?.(wantsPreview);\n    }\n    cancelInput(focusEditor, caller) {\n        // this._trace(`invoking cancelInput, caller: ${caller}, _currentCancelInput: ${this._currentAcceptInput ? 'not undefined' : 'undefined'}`);\n        this._currentCancelInput?.(focusEditor);\n    }\n    focusNextRenameSuggestion() {\n        if (!this._renameCandidateListView?.focusNext()) {\n            this._inputWithButton.input.value = this._currentName;\n        }\n    }\n    focusPreviousRenameSuggestion() {\n        if (!this._renameCandidateListView?.focusPrevious()) {\n            this._inputWithButton.input.value = this._currentName;\n        }\n    }\n    /**\n     * @param requestRenameCandidates is `undefined` when there are no rename suggestion providers\n     */\n    getInput(where, currentName, supportPreview, requestRenameCandidates, cts) {\n        const { start: selectionStart, end: selectionEnd } = this._getSelection(where, currentName);\n        this._renameCts = cts;\n        const disposeOnDone = new DisposableStore();\n        this._nRenameSuggestionsInvocations = 0;\n        this._hadAutomaticRenameSuggestionsInvocation = false;\n        if (requestRenameCandidates === undefined) {\n            this._inputWithButton.button.style.display = 'none';\n        }\n        else {\n            this._inputWithButton.button.style.display = 'flex';\n            this._requestRenameCandidatesOnce = requestRenameCandidates;\n            this._requestRenameCandidates(currentName, false);\n            disposeOnDone.add(dom.addDisposableListener(this._inputWithButton.button, 'click', () => this._requestRenameCandidates(currentName, true)));\n            disposeOnDone.add(dom.addDisposableListener(this._inputWithButton.button, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                if (keyEvent.equals(3 /* KeyCode.Enter */) || keyEvent.equals(10 /* KeyCode.Space */)) {\n                    keyEvent.stopPropagation();\n                    keyEvent.preventDefault();\n                    this._requestRenameCandidates(currentName, true);\n                }\n            }));\n        }\n        this._isEditingRenameCandidate = false;\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._currentName = currentName;\n        this._inputWithButton.input.value = currentName;\n        this._inputWithButton.input.setAttribute('selectionStart', selectionStart.toString());\n        this._inputWithButton.input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._inputWithButton.input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20); // determines width\n        this._beforeFirstInputFieldEditSW.reset();\n        disposeOnDone.add(toDisposable(() => {\n            this._renameCts = undefined;\n            cts.dispose(true);\n        })); // @ulugbekna: this may result in `this.cancelInput` being called twice, but it should be safe since we set it to undefined after 1st call\n        disposeOnDone.add(toDisposable(() => {\n            if (this._renameCandidateProvidersCts !== undefined) {\n                this._renameCandidateProvidersCts.dispose(true);\n                this._renameCandidateProvidersCts = undefined;\n            }\n        }));\n        disposeOnDone.add(toDisposable(() => this._candidates.clear()));\n        const inputResult = new DeferredPromise();\n        inputResult.p.finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n        this._currentCancelInput = (focusEditor) => {\n            this._trace('invoking _currentCancelInput');\n            this._currentAcceptInput = undefined;\n            this._currentCancelInput = undefined;\n            // fixme session cleanup\n            this._renameCandidateListView?.clearCandidates();\n            inputResult.complete(focusEditor);\n            return true;\n        };\n        this._currentAcceptInput = (wantsPreview) => {\n            this._trace('invoking _currentAcceptInput');\n            assertType(this._renameCandidateListView !== undefined);\n            const nRenameSuggestions = this._renameCandidateListView.nCandidates;\n            let newName;\n            let source;\n            const focusedCandidate = this._renameCandidateListView.focusedCandidate;\n            if (focusedCandidate !== undefined) {\n                this._trace('using new name from renameSuggestion');\n                newName = focusedCandidate;\n                source = { k: 'renameSuggestion' };\n            }\n            else {\n                this._trace('using new name from inputField');\n                newName = this._inputWithButton.input.value;\n                source = this._isEditingRenameCandidate ? { k: 'userEditedRenameSuggestion' } : { k: 'inputField' };\n            }\n            if (newName === currentName || newName.trim().length === 0 /* is just whitespace */) {\n                this.cancelInput(true, '_currentAcceptInput (because newName === value || newName.trim().length === 0)');\n                return;\n            }\n            this._currentAcceptInput = undefined;\n            this._currentCancelInput = undefined;\n            this._renameCandidateListView.clearCandidates();\n            // fixme session cleanup\n            inputResult.complete({\n                newName,\n                wantsPreview: supportPreview && wantsPreview,\n                stats: {\n                    source,\n                    nRenameSuggestions,\n                    timeBeforeFirstInputFieldEdit: this._timeBeforeFirstInputFieldEdit,\n                    nRenameSuggestionsInvocations: this._nRenameSuggestionsInvocations,\n                    hadAutomaticRenameSuggestionsInvocation: this._hadAutomaticRenameSuggestionsInvocation,\n                }\n            });\n        };\n        disposeOnDone.add(cts.token.onCancellationRequested(() => this.cancelInput(true, 'cts.token.onCancellationRequested')));\n        if (!_sticky) {\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(!this._domNode?.ownerDocument.hasFocus(), 'editor.onDidBlurEditorWidget')));\n        }\n        this._show();\n        return inputResult.p;\n    }\n    _requestRenameCandidates(currentName, isManuallyTriggered) {\n        if (this._requestRenameCandidatesOnce === undefined) {\n            return;\n        }\n        if (this._renameCandidateProvidersCts !== undefined) {\n            this._renameCandidateProvidersCts.dispose(true);\n        }\n        assertType(this._renameCts);\n        if (this._inputWithButton.buttonState !== 'stop') {\n            this._renameCandidateProvidersCts = new CancellationTokenSource();\n            const triggerKind = isManuallyTriggered ? NewSymbolNameTriggerKind.Invoke : NewSymbolNameTriggerKind.Automatic;\n            const candidates = this._requestRenameCandidatesOnce(triggerKind, this._renameCandidateProvidersCts.token);\n            if (candidates.length === 0) {\n                this._inputWithButton.setSparkleButton();\n                return;\n            }\n            if (!isManuallyTriggered) {\n                this._hadAutomaticRenameSuggestionsInvocation = true;\n            }\n            this._nRenameSuggestionsInvocations += 1;\n            this._inputWithButton.setStopButton();\n            this._updateRenameCandidates(candidates, currentName, this._renameCts.token);\n        }\n    }\n    /**\n     * This allows selecting only part of the symbol name in the input field based on the selection in the editor\n     */\n    _getSelection(where, currentName) {\n        assertType(this._editor.hasModel());\n        const selection = this._editor.getSelection();\n        let start = 0;\n        let end = currentName.length;\n        if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(where, selection)) {\n            start = Math.max(0, selection.startColumn - where.startColumn);\n            end = Math.min(where.endColumn, selection.endColumn) - where.startColumn;\n        }\n        return { start, end };\n    }\n    _show() {\n        this._trace('invoking _show');\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        // TODO@ulugbekna: could this be simply run in `afterRender`?\n        setTimeout(() => {\n            this._inputWithButton.input.focus();\n            this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute('selectionStart')), parseInt(this._inputWithButton.input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    async _updateRenameCandidates(candidates, currentName, token) {\n        const trace = (...args) => this._trace('_updateRenameCandidates', ...args);\n        trace('start');\n        const namesListResults = await raceCancellation(Promise.allSettled(candidates), token);\n        this._inputWithButton.setSparkleButton();\n        if (namesListResults === undefined) {\n            trace('returning early - received updateRenameCandidates results - undefined');\n            return;\n        }\n        const newNames = namesListResults.flatMap(namesListResult => namesListResult.status === 'fulfilled' && isDefined(namesListResult.value)\n            ? namesListResult.value\n            : []);\n        trace(`received updateRenameCandidates results - total (unfiltered) ${newNames.length} candidates.`);\n        // deduplicate and filter out the current value\n        const distinctNames = arrays.distinct(newNames, v => v.newSymbolName);\n        trace(`distinct candidates - ${distinctNames.length} candidates.`);\n        const validDistinctNames = distinctNames.filter(({ newSymbolName }) => newSymbolName.trim().length > 0 && newSymbolName !== this._inputWithButton.input.value && newSymbolName !== currentName && !this._candidates.has(newSymbolName));\n        trace(`valid distinct candidates - ${newNames.length} candidates.`);\n        validDistinctNames.forEach(n => this._candidates.add(n.newSymbolName));\n        if (validDistinctNames.length < 1) {\n            trace('returning early - no valid distinct candidates');\n            return;\n        }\n        // show the candidates\n        trace('setting candidates');\n        this._renameCandidateListView.setCandidates(validDistinctNames);\n        // ask editor to re-layout given that the widget is now of a different size after rendering rename candidates\n        trace('asking editor to re-layout');\n        this._editor.layoutContentWidget(this);\n    }\n    _hide() {\n        this._trace('invoked _hide');\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n    _getTopForPosition() {\n        const visibleRanges = this._editor.getVisibleRanges();\n        let firstLineInViewport;\n        if (visibleRanges.length > 0) {\n            firstLineInViewport = visibleRanges[0].startLineNumber;\n        }\n        else {\n            this._logService.warn('RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty');\n            firstLineInViewport = Math.max(1, this._position.lineNumber - 5); // @ulugbekna: fallback to current line minus 5\n        }\n        return this._editor.getTopForLineNumber(this._position.lineNumber) - this._editor.getTopForLineNumber(firstLineInViewport);\n    }\n    _trace(...args) {\n        this._logService.trace('RenameWidget', ...args);\n    }\n};\nRenameWidget = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService),\n    __param(5, ILogService)\n], RenameWidget);\nexport { RenameWidget };\nclass RenameCandidateListView {\n    // FIXME@ulugbekna: rewrite using event emitters\n    constructor(parent, opts) {\n        this._disposables = new DisposableStore();\n        this._availableHeight = 0;\n        this._minimumWidth = 0;\n        this._lineHeight = opts.fontInfo.lineHeight;\n        this._typicalHalfwidthCharacterWidth = opts.fontInfo.typicalHalfwidthCharacterWidth;\n        this._listContainer = document.createElement('div');\n        this._listContainer.className = 'rename-box rename-candidate-list-container';\n        parent.appendChild(this._listContainer);\n        this._listWidget = RenameCandidateListView._createListWidget(this._listContainer, this._candidateViewHeight, opts.fontInfo);\n        this._listWidget.onDidChangeFocus(e => {\n            if (e.elements.length === 1) {\n                opts.onFocusChange(e.elements[0].newSymbolName);\n            }\n        }, this._disposables);\n        this._listWidget.onDidChangeSelection(e => {\n            if (e.elements.length === 1) {\n                opts.onSelectionChange();\n            }\n        }, this._disposables);\n        this._disposables.add(this._listWidget.onDidBlur(e => {\n            this._listWidget.setFocus([]);\n        }));\n        this._listWidget.style(getListStyles({\n            listInactiveFocusForeground: quickInputListFocusForeground,\n            listInactiveFocusBackground: quickInputListFocusBackground,\n        }));\n    }\n    dispose() {\n        this._listWidget.dispose();\n        this._disposables.dispose();\n    }\n    // height - max height allowed by parent element\n    layout({ height, width }) {\n        this._availableHeight = height;\n        this._minimumWidth = width;\n    }\n    setCandidates(candidates) {\n        // insert candidates into list widget\n        this._listWidget.splice(0, 0, candidates);\n        // adjust list widget layout\n        const height = this._pickListHeight(this._listWidget.length);\n        const width = this._pickListWidth(candidates);\n        this._listWidget.layout(height, width);\n        // adjust list container layout\n        this._listContainer.style.height = `${height}px`;\n        this._listContainer.style.width = `${width}px`;\n        aria.status(nls.localize('renameSuggestionsReceivedAria', \"Received {0} rename suggestions\", candidates.length));\n    }\n    clearCandidates() {\n        this._listContainer.style.height = '0px';\n        this._listContainer.style.width = '0px';\n        this._listWidget.splice(0, this._listWidget.length, []);\n    }\n    get nCandidates() {\n        return this._listWidget.length;\n    }\n    get focusedCandidate() {\n        if (this._listWidget.length === 0) {\n            return;\n        }\n        const selectedElement = this._listWidget.getSelectedElements()[0];\n        if (selectedElement !== undefined) {\n            return selectedElement.newSymbolName;\n        }\n        const focusedElement = this._listWidget.getFocusedElements()[0];\n        if (focusedElement !== undefined) {\n            return focusedElement.newSymbolName;\n        }\n        return;\n    }\n    focusNext() {\n        if (this._listWidget.length === 0) {\n            return false;\n        }\n        const focusedIxs = this._listWidget.getFocus();\n        if (focusedIxs.length === 0) {\n            this._listWidget.focusFirst();\n            this._listWidget.reveal(0);\n            return true;\n        }\n        else {\n            if (focusedIxs[0] === this._listWidget.length - 1) {\n                this._listWidget.setFocus([]);\n                this._listWidget.reveal(0); // @ulugbekna: without this, it seems like focused element is obstructed\n                return false;\n            }\n            else {\n                this._listWidget.focusNext();\n                const focused = this._listWidget.getFocus()[0];\n                this._listWidget.reveal(focused);\n                return true;\n            }\n        }\n    }\n    /**\n     * @returns true if focus is moved to previous element\n     */\n    focusPrevious() {\n        if (this._listWidget.length === 0) {\n            return false;\n        }\n        const focusedIxs = this._listWidget.getFocus();\n        if (focusedIxs.length === 0) {\n            this._listWidget.focusLast();\n            const focused = this._listWidget.getFocus()[0];\n            this._listWidget.reveal(focused);\n            return true;\n        }\n        else {\n            if (focusedIxs[0] === 0) {\n                this._listWidget.setFocus([]);\n                return false;\n            }\n            else {\n                this._listWidget.focusPrevious();\n                const focused = this._listWidget.getFocus()[0];\n                this._listWidget.reveal(focused);\n                return true;\n            }\n        }\n    }\n    clearFocus() {\n        this._listWidget.setFocus([]);\n    }\n    get _candidateViewHeight() {\n        const { totalHeight } = RenameCandidateView.getLayoutInfo({ lineHeight: this._lineHeight });\n        return totalHeight;\n    }\n    _pickListHeight(nCandidates) {\n        const heightToFitAllCandidates = this._candidateViewHeight * nCandidates;\n        const MAX_N_CANDIDATES = 7; // @ulugbekna: max # of candidates we want to show at once\n        const height = Math.min(heightToFitAllCandidates, this._availableHeight, this._candidateViewHeight * MAX_N_CANDIDATES);\n        return height;\n    }\n    _pickListWidth(candidates) {\n        const longestCandidateWidth = Math.ceil(Math.max(...candidates.map(c => c.newSymbolName.length)) * this._typicalHalfwidthCharacterWidth);\n        const width = Math.max(this._minimumWidth, 4 /* padding */ + 16 /* sparkle icon */ + 5 /* margin-left */ + longestCandidateWidth + 10 /* (possibly visible) scrollbar width */ // TODO@ulugbekna: approximate calc - clean this up\n        );\n        return width;\n    }\n    static _createListWidget(container, candidateViewHeight, fontInfo) {\n        const virtualDelegate = new class {\n            getTemplateId(element) {\n                return 'candidate';\n            }\n            getHeight(element) {\n                return candidateViewHeight;\n            }\n        };\n        const renderer = new class {\n            constructor() {\n                this.templateId = 'candidate';\n            }\n            renderTemplate(container) {\n                return new RenameCandidateView(container, fontInfo);\n            }\n            renderElement(candidate, index, templateData) {\n                templateData.populate(candidate);\n            }\n            disposeTemplate(templateData) {\n                templateData.dispose();\n            }\n        };\n        return new List('NewSymbolNameCandidates', container, virtualDelegate, [renderer], {\n            keyboardSupport: false, // @ulugbekna: because we handle keyboard events through proper commands & keybinding service, see `rename.ts`\n            mouseSupport: true,\n            multipleSelectionSupport: false,\n        });\n    }\n}\nclass InputWithButton {\n    constructor() {\n        this._onDidInputChange = new Emitter();\n        this.onDidInputChange = this._onDidInputChange.event;\n        this._disposables = new DisposableStore();\n    }\n    get domNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'rename-input-with-button';\n            this._domNode.style.display = 'flex';\n            this._domNode.style.flexDirection = 'row';\n            this._domNode.style.alignItems = 'center';\n            this._inputNode = document.createElement('input');\n            this._inputNode.className = 'rename-input';\n            this._inputNode.type = 'text';\n            this._inputNode.style.border = 'none';\n            this._inputNode.setAttribute('aria-label', nls.localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._inputNode);\n            this._buttonNode = document.createElement('div');\n            this._buttonNode.className = 'rename-suggestions-button';\n            this._buttonNode.setAttribute('tabindex', '0');\n            this._buttonGenHoverText = nls.localize('generateRenameSuggestionsButton', \"Generate new name suggestions\");\n            this._buttonCancelHoverText = nls.localize('cancelRenameSuggestionsButton', \"Cancel\");\n            this._buttonHover = getBaseLayerHoverDelegate().setupManagedHover(getDefaultHoverDelegate('element'), this._buttonNode, this._buttonGenHoverText);\n            this._disposables.add(this._buttonHover);\n            this._domNode.appendChild(this._buttonNode);\n            // notify if selection changes to cancel request to rename-suggestion providers\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.INPUT, () => this._onDidInputChange.fire()));\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                if (keyEvent.keyCode === 15 /* KeyCode.LeftArrow */ || keyEvent.keyCode === 17 /* KeyCode.RightArrow */) {\n                    this._onDidInputChange.fire();\n                }\n            }));\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.CLICK, () => this._onDidInputChange.fire()));\n            // focus \"container\" border instead of input box\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.FOCUS, () => {\n                this.domNode.style.outlineWidth = '1px';\n                this.domNode.style.outlineStyle = 'solid';\n                this.domNode.style.outlineOffset = '-1px';\n                this.domNode.style.outlineColor = 'var(--vscode-focusBorder)';\n            }));\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.BLUR, () => {\n                this.domNode.style.outline = 'none';\n            }));\n        }\n        return this._domNode;\n    }\n    get input() {\n        assertType(this._inputNode);\n        return this._inputNode;\n    }\n    get button() {\n        assertType(this._buttonNode);\n        return this._buttonNode;\n    }\n    get buttonState() {\n        return this._buttonState;\n    }\n    setSparkleButton() {\n        this._buttonState = 'sparkle';\n        this._sparkleIcon ??= renderIcon(Codicon.sparkle);\n        dom.clearNode(this.button);\n        this.button.appendChild(this._sparkleIcon);\n        this.button.setAttribute('aria-label', 'Generating new name suggestions');\n        this._buttonHover?.update(this._buttonGenHoverText);\n        this.input.focus();\n    }\n    setStopButton() {\n        this._buttonState = 'stop';\n        this._stopIcon ??= renderIcon(Codicon.primitiveSquare);\n        dom.clearNode(this.button);\n        this.button.appendChild(this._stopIcon);\n        this.button.setAttribute('aria-label', 'Cancel generating new name suggestions');\n        this._buttonHover?.update(this._buttonCancelHoverText);\n        this.input.focus();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nclass RenameCandidateView {\n    static { this._PADDING = 2; }\n    constructor(parent, fontInfo) {\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'rename-box rename-candidate';\n        this._domNode.style.display = `flex`;\n        this._domNode.style.columnGap = `5px`;\n        this._domNode.style.alignItems = `center`;\n        this._domNode.style.height = `${fontInfo.lineHeight}px`;\n        this._domNode.style.padding = `${RenameCandidateView._PADDING}px`;\n        // @ulugbekna: needed to keep space when the `icon.style.display` is set to `none`\n        const iconContainer = document.createElement('div');\n        iconContainer.style.display = `flex`;\n        iconContainer.style.alignItems = `center`;\n        iconContainer.style.width = iconContainer.style.height = `${fontInfo.lineHeight * 0.8}px`;\n        this._domNode.appendChild(iconContainer);\n        this._icon = renderIcon(Codicon.sparkle);\n        this._icon.style.display = `none`;\n        iconContainer.appendChild(this._icon);\n        this._label = document.createElement('div');\n        domFontInfo.applyFontInfo(this._label, fontInfo);\n        this._domNode.appendChild(this._label);\n        parent.appendChild(this._domNode);\n    }\n    populate(value) {\n        this._updateIcon(value);\n        this._updateLabel(value);\n    }\n    _updateIcon(value) {\n        const isAIGenerated = !!value.tags?.includes(NewSymbolNameTag.AIGenerated);\n        this._icon.style.display = isAIGenerated ? 'inherit' : 'none';\n    }\n    _updateLabel(value) {\n        this._label.innerText = value.newSymbolName;\n    }\n    static getLayoutInfo({ lineHeight }) {\n        const totalHeight = lineHeight + RenameCandidateView._PADDING * 2 /* top & bottom padding */;\n        return { totalHeight };\n    }\n    dispose() {\n    }\n}\n"],"names":[],"mappings":"AAAA;;;8FAG8F;;;;;AAU9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAnCA,IAAI,aAAa,4CAAS,yCAAK,UAAU,IAAK,SAAU,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI;IACjF,IAAI,IAAI,UAAU,MAAM,EAAE,IAAI,IAAI,IAAI,SAAS,SAAS,OAAO,OAAO,OAAO,wBAAwB,CAAC,QAAQ,OAAO,MAAM;IAC3H,IAAI,OAAO,YAAY,YAAY,OAAO,QAAQ,QAAQ,KAAK,YAAY,IAAI,QAAQ,QAAQ,CAAC,YAAY,QAAQ,KAAK;SACpH,IAAK,IAAI,IAAI,WAAW,MAAM,GAAG,GAAG,KAAK,GAAG,IAAK,IAAI,IAAI,UAAU,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,IAAI,EAAE,KAAK,IAAI,IAAI,EAAE,QAAQ,KAAK,KAAK,EAAE,QAAQ,IAAI,KAAK;IAChJ,OAAO,IAAI,KAAK,KAAK,OAAO,cAAc,CAAC,QAAQ,KAAK,IAAI;AAChE;AACA,IAAI,UAAU,4CAAS,yCAAK,OAAO,IAAK,SAAU,UAAU,EAAE,SAAS;IACnE,OAAO,SAAU,MAAM,EAAE,GAAG;QAAI,UAAU,QAAQ,KAAK;IAAa;AACxE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,kBAAkB,GAClB,MAAM,UAAU;AACT,MAAM,+BAA+B,IAAI,gQAAA,CAAA,gBAAa,CAAC,sBAAsB,OAAO,qOAAA,CAAA,WAAY,CAAC,sBAAsB;AACvH,MAAM,+BAA+B,IAAI,gQAAA,CAAA,gBAAa,CAAC,sBAAsB,OAAO,qOAAA,CAAA,WAAY,CAAC,sBAAsB;AAC9H,IAAI,eAAe,MAAM;IA0BrB,UAAU;QACN,IAAI,CAAC,YAAY,CAAC,OAAO;QACzB,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI;IACzC;IACA,QAAQ;QACJ,OAAO;IACX;IACA,aAAa;QACT,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,IAAI,CAAC,QAAQ,GAAG,SAAS,aAAa,CAAC;YACvC,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG;YAC1B,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO;YACvD,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,wBAAwB,IAAI,CAAC,QAAQ,EAAE;gBAC7F,UAAU,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,yBAAyB;gBAC7D,eAAe,CAAC;oBACZ,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,GAAG;oBACpC,IAAI,CAAC,yBAAyB,GAAG,OAAO,oBAAoB;gBAChE;gBACA,mBAAmB;oBACf,IAAI,CAAC,yBAAyB,GAAG,OAAO,sDAAsD;oBAC9F,IAAI,CAAC,WAAW,CAAC,QAAQ,kDAAkD;gBAC/E;YACJ;YACA,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC;oBACrD,gCAIA,oCAGJ;gBAPA,IAAI,EAAA,iCAAA,IAAI,CAAC,wBAAwB,cAA7B,qDAAA,+BAA+B,gBAAgB,MAAK,WAAW;oBAC/D,IAAI,CAAC,yBAAyB,GAAG;gBACrC;;gBACA,wCAAA,IAAI,CAAC,qIAAL,IAAI,CAAC,iCAAmC,IAAI,CAAC,4BAA4B,CAAC,OAAO;gBACjF,IAAI,EAAA,qCAAA,IAAI,CAAC,4BAA4B,cAAjC,yDAAA,mCAAmC,KAAK,CAAC,uBAAuB,MAAK,OAAO;oBAC5E,IAAI,CAAC,4BAA4B,CAAC,MAAM;gBAC5C;iBACA,kCAAA,IAAI,CAAC,wBAAwB,cAA7B,sDAAA,gCAA+B,UAAU;YAC7C;YACA,IAAI,CAAC,MAAM,GAAG,SAAS,aAAa,CAAC;YACrC,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG;YACxB,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM;YACrC,IAAI,CAAC,WAAW;YAChB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,aAAa;QACvD;QACA,OAAO,IAAI,CAAC,QAAQ;IACxB;IACA,cAAc,KAAK,EAAE;QACjB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB;QACJ;QACA,MAAM,oBAAoB,MAAM,QAAQ,CAAC,uQAAA,CAAA,eAAY;QACrD,MAAM,oBAAoB,MAAM,QAAQ,CAAC,uQAAA,CAAA,eAAY;YACR;QAA7C,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe,GAAG,OAAO,CAAA,kBAAA,MAAM,QAAQ,CAAC,uQAAA,CAAA,yBAAsB,eAArC,6BAAA,kBAA0C;QACvF,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,GAAG,oBAAoB,AAAC,gBAAiC,OAAlB,qBAAsB;QAC1F,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAG,oBAAoB,AAAC,aAA8B,OAAlB,qBAAsB;YACjD;QAAnC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG,OAAO,CAAA,mBAAA,MAAM,QAAQ,CAAC,sQAAA,CAAA,kBAAe,eAA9B,8BAAA,mBAAmC;QACtE,MAAM,SAAS,MAAM,QAAQ,CAAC,sQAAA,CAAA,cAAW;YACoB;QAA7D,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,KAAK,CAAC,eAAe,GAAG,OAAO,CAAA,mBAAA,MAAM,QAAQ,CAAC,sQAAA,CAAA,kBAAe,eAA9B,8BAAA,mBAAmC;YACrC;QAA3D,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,CAAC,eAAe,GAAG,OAAO,CAAA,mBAAA,MAAM,QAAQ,CAAC,sQAAA,CAAA,kBAAe,eAA9B,8BAAA,mBAAmC;QAC9F,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,GAAG,SAAS,QAAQ;QACnE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,GAAG,SAAS,UAAU;YACnB;QAAlD,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,GAAG,CAAA,mBAAA,mBAAA,6BAAA,OAAQ,QAAQ,gBAAhB,8BAAA,mBAAsB;IAC5E;IACA,cAAc;QACV,IAAI,IAAI,CAAC,QAAQ,KAAK,WAAW;YAC7B;QACJ;QACA,CAAA,GAAA,yOAAA,CAAA,aAAU,AAAD,EAAE,IAAI,CAAC,MAAM,KAAK,WAAW;QACtC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK;QACtD,MAAM,WAAW,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,yBAAyB;QACpE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,AAAC,GAAgD,OAA9C,IAAI,CAAC,qBAAqB,CAAC,SAAS,QAAQ,GAAE;IAClF;IACA,sBAAsB,cAAc,EAAE;QAClC,OAAO,iBAAiB;IAC5B;IACA,cAAc;QACV,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,OAAO;QACX;QACA,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,MAAM,+BAA+B;QAC3D,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,uFAAuF;UACpH;YACE,OAAO;QACX;QACA,MAAM,UAAU,wOAAA,CAAA,gBAAiB,CAAC,IAAI,CAAC,UAAU,GAAG,aAAa,CAAC,IAAI;QACtE,MAAM,YAAY,wOAAA,CAAA,yBAA0B,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU;QACpE,MAAM,eAAe,IAAI,CAAC,kBAAkB;QAC5C,IAAI,CAAC,kBAAkB,GAAG,eAAe,UAAU,GAAG;QACtD,IAAI,CAAC,kBAAkB,GAAG,QAAQ,MAAM,GAAG,IAAI,CAAC,kBAAkB;QAClE,MAAM,aAAa,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,2BAA2B;QACxE,MAAM,EAAE,aAAa,mBAAmB,EAAE,GAAG,oBAAoB,aAAa,CAAC;YAAE;QAAW;QAC5F,MAAM,qBAAqB,IAAI,CAAC,kBAAkB,GAAG,sBAAsB,EAAE,wFAAwF,MAC/J;YAAC,EAAE,yCAAyC;YAAI,EAAE,yCAAyC;SAAG,GAC9F;YAAC,EAAE,yCAAyC;YAAI,EAAE,yCAAyC;SAAG;QACpG,OAAO;YACH,UAAU,IAAI,CAAC,SAAS;YACxB,YAAY;QAChB;IACJ;IACA,eAAe;YAEiK,2CAA8D;QAD1O,MAAM,CAAC,QAAQ,QAAQ,GAAG,IAAI,CAAC,kBAAkB;QACjD,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,qOAAA,CAAA,WAAY,CAAC;YAAE,KAAK;YAAS,SAAS;gBAAC;aAAwE;QAAC,GAAG,kCAAiC,4CAAA,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,qBAAzC,gEAAA,0CAAkD,QAAQ,KAAI,6CAAA,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,sBAAzC,iEAAA,2CAAmD,QAAQ;QACrS,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,GAAI,SAAQ,mDAAmD;QAC3F,OAAO;IACX;IACA,YAAY,QAAQ,EAAE;QAClB,0JAA0J;QAC1J,mFAAmF;QACnF,IAAI,aAAa,MAAM;YACnB,yDAAyD;YACzD,IAAI,CAAC,WAAW,CAAC,MAAM;YACvB;QACJ;QACA,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,MAAM,mBAAmB;QAC/C,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,2EAA2E;UACxG;YACE;QACJ;QACA,CAAA,GAAA,yOAAA,CAAA,aAAU,AAAD,EAAE,IAAI,CAAC,wBAAwB;QACxC,CAAA,GAAA,yOAAA,CAAA,aAAU,AAAD,EAAE,IAAI,CAAC,kBAAkB,KAAK;QACvC,CAAA,GAAA,yOAAA,CAAA,aAAU,AAAD,EAAE,IAAI,CAAC,kBAAkB,KAAK;QACvC,MAAM,iBAAiB,wOAAA,CAAA,iBAAkB,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO;QACvE,MAAM,cAAc,wOAAA,CAAA,iBAAkB,CAAC,IAAI,CAAC,MAAM;QAClD,IAAI;QACJ,IAAI,aAAa,EAAE,yCAAyC,KAAI;YAC5D,uBAAuB,IAAI,CAAC,kBAAkB;QAClD,OACK;YACD,uBAAuB,IAAI,CAAC,kBAAkB;QAClD;QACA,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC;YACjC,QAAQ,uBAAuB,cAAc;YAC7C,OAAO,wOAAA,CAAA,gBAAiB,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO;QAC1D;IACJ;IACA,YAAY,YAAY,EAAE;YAEtB,2BAAA;QADA,IAAI,CAAC,MAAM,CAAE;SACb,4BAAA,CAAA,QAAA,IAAI,EAAC,mBAAmB,cAAxB,gDAAA,+BAAA,OAA2B;IAC/B;IACA,YAAY,WAAW,EAAE,MAAM,EAAE;YAC7B,4IAA4I;QAC5I,2BAAA;SAAA,4BAAA,CAAA,QAAA,IAAI,EAAC,mBAAmB,cAAxB,gDAAA,+BAAA,OAA2B;IAC/B;IACA,4BAA4B;YACnB;QAAL,IAAI,GAAC,iCAAA,IAAI,CAAC,wBAAwB,cAA7B,qDAAA,+BAA+B,SAAS,KAAI;YAC7C,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY;QACzD;IACJ;IACA,gCAAgC;YACvB;QAAL,IAAI,GAAC,iCAAA,IAAI,CAAC,wBAAwB,cAA7B,qDAAA,+BAA+B,aAAa,KAAI;YACjD,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY;QACzD;IACJ;IACA;;KAEC,GACD,SAAS,KAAK,EAAE,WAAW,EAAE,cAAc,EAAE,uBAAuB,EAAE,GAAG,EAAE;QACvE,MAAM,EAAE,OAAO,cAAc,EAAE,KAAK,YAAY,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO;QAC/E,IAAI,CAAC,UAAU,GAAG;QAClB,MAAM,gBAAgB,IAAI,6OAAA,CAAA,kBAAe;QACzC,IAAI,CAAC,8BAA8B,GAAG;QACtC,IAAI,CAAC,wCAAwC,GAAG;QAChD,IAAI,4BAA4B,WAAW;YACvC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG;QACjD,OACK;YACD,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG;YAC7C,IAAI,CAAC,4BAA4B,GAAG;YACpC,IAAI,CAAC,wBAAwB,CAAC,aAAa;YAC3C,cAAc,GAAG,CAAC,wOAAA,CAAA,wBAAyB,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,SAAS,IAAM,IAAI,CAAC,wBAAwB,CAAC,aAAa;YACpI,cAAc,GAAG,CAAC,wOAAA,CAAA,wBAAyB,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,wOAAA,CAAA,YAAa,CAAC,QAAQ,EAAE,CAAC;gBAC/F,MAAM,WAAW,IAAI,kPAAA,CAAA,wBAAqB,CAAC;gBAC3C,IAAI,SAAS,MAAM,CAAC,EAAE,iBAAiB,QAAO,SAAS,MAAM,CAAC,GAAG,iBAAiB,MAAK;oBACnF,SAAS,eAAe;oBACxB,SAAS,cAAc;oBACvB,IAAI,CAAC,wBAAwB,CAAC,aAAa;gBAC/C;YACJ;QACJ;QACA,IAAI,CAAC,yBAAyB,GAAG;QACjC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW;QAC1C,IAAI,CAAC,SAAS,GAAG,IAAI,sPAAA,CAAA,WAAQ,CAAC,MAAM,eAAe,EAAE,MAAM,WAAW;QACtE,IAAI,CAAC,YAAY,GAAG;QACpB,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,GAAG;QACpC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,YAAY,CAAC,kBAAkB,eAAe,QAAQ;QAClF,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,YAAY,CAAC,gBAAgB,aAAa,QAAQ;QAC9E,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,MAAM,SAAS,GAAG,MAAM,WAAW,IAAI,KAAK,KAAK,mBAAmB;QACjH,IAAI,CAAC,4BAA4B,CAAC,KAAK;QACvC,cAAc,GAAG,CAAC,CAAA,GAAA,6OAAA,CAAA,eAAY,AAAD,EAAE;YAC3B,IAAI,CAAC,UAAU,GAAG;YAClB,IAAI,OAAO,CAAC;QAChB,KAAK,0IAA0I;QAC/I,cAAc,GAAG,CAAC,CAAA,GAAA,6OAAA,CAAA,eAAY,AAAD,EAAE;YAC3B,IAAI,IAAI,CAAC,4BAA4B,KAAK,WAAW;gBACjD,IAAI,CAAC,4BAA4B,CAAC,OAAO,CAAC;gBAC1C,IAAI,CAAC,4BAA4B,GAAG;YACxC;QACJ;QACA,cAAc,GAAG,CAAC,CAAA,GAAA,6OAAA,CAAA,eAAY,AAAD,EAAE,IAAM,IAAI,CAAC,WAAW,CAAC,KAAK;QAC3D,MAAM,cAAc,IAAI,yOAAA,CAAA,kBAAe;QACvC,YAAY,CAAC,CAAC,OAAO,CAAC;YAClB,cAAc,OAAO;YACrB,IAAI,CAAC,KAAK;QACd;QACA,IAAI,CAAC,mBAAmB,GAAG,CAAC;gBAIxB,wBAAwB;YACxB;YAJA,IAAI,CAAC,MAAM,CAAC;YACZ,IAAI,CAAC,mBAAmB,GAAG;YAC3B,IAAI,CAAC,mBAAmB,GAAG;aAE3B,iCAAA,IAAI,CAAC,wBAAwB,cAA7B,qDAAA,+BAA+B,eAAe;YAC9C,YAAY,QAAQ,CAAC;YACrB,OAAO;QACX;QACA,IAAI,CAAC,mBAAmB,GAAG,CAAC;YACxB,IAAI,CAAC,MAAM,CAAC;YACZ,CAAA,GAAA,yOAAA,CAAA,aAAU,AAAD,EAAE,IAAI,CAAC,wBAAwB,KAAK;YAC7C,MAAM,qBAAqB,IAAI,CAAC,wBAAwB,CAAC,WAAW;YACpE,IAAI;YACJ,IAAI;YACJ,MAAM,mBAAmB,IAAI,CAAC,wBAAwB,CAAC,gBAAgB;YACvE,IAAI,qBAAqB,WAAW;gBAChC,IAAI,CAAC,MAAM,CAAC;gBACZ,UAAU;gBACV,SAAS;oBAAE,GAAG;gBAAmB;YACrC,OACK;gBACD,IAAI,CAAC,MAAM,CAAC;gBACZ,UAAU,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK;gBAC3C,SAAS,IAAI,CAAC,yBAAyB,GAAG;oBAAE,GAAG;gBAA6B,IAAI;oBAAE,GAAG;gBAAa;YACtG;YACA,IAAI,YAAY,eAAe,QAAQ,IAAI,GAAG,MAAM,KAAK,EAAE,sBAAsB,KAAI;gBACjF,IAAI,CAAC,WAAW,CAAC,MAAM;gBACvB;YACJ;YACA,IAAI,CAAC,mBAAmB,GAAG;YAC3B,IAAI,CAAC,mBAAmB,GAAG;YAC3B,IAAI,CAAC,wBAAwB,CAAC,eAAe;YAC7C,wBAAwB;YACxB,YAAY,QAAQ,CAAC;gBACjB;gBACA,cAAc,kBAAkB;gBAChC,OAAO;oBACH;oBACA;oBACA,+BAA+B,IAAI,CAAC,8BAA8B;oBAClE,+BAA+B,IAAI,CAAC,8BAA8B;oBAClE,yCAAyC,IAAI,CAAC,wCAAwC;gBAC1F;YACJ;QACJ;QACA,cAAc,GAAG,CAAC,IAAI,KAAK,CAAC,uBAAuB,CAAC,IAAM,IAAI,CAAC,WAAW,CAAC,MAAM;QACjF,wCAAc;YACV,cAAc,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,qBAAqB,CAAC;oBAAwB;uBAAlB,IAAI,CAAC,WAAW,CAAC,GAAC,iBAAA,IAAI,CAAC,QAAQ,cAAb,qCAAA,eAAe,aAAa,CAAC,QAAQ,KAAI;;QAC1H;QACA,IAAI,CAAC,KAAK;QACV,OAAO,YAAY,CAAC;IACxB;IACA,yBAAyB,WAAW,EAAE,mBAAmB,EAAE;QACvD,IAAI,IAAI,CAAC,4BAA4B,KAAK,WAAW;YACjD;QACJ;QACA,IAAI,IAAI,CAAC,4BAA4B,KAAK,WAAW;YACjD,IAAI,CAAC,4BAA4B,CAAC,OAAO,CAAC;QAC9C;QACA,CAAA,GAAA,yOAAA,CAAA,aAAU,AAAD,EAAE,IAAI,CAAC,UAAU;QAC1B,IAAI,IAAI,CAAC,gBAAgB,CAAC,WAAW,KAAK,QAAQ;YAC9C,IAAI,CAAC,4BAA4B,GAAG,IAAI,gPAAA,CAAA,0BAAuB;YAC/D,MAAM,cAAc,sBAAsB,+OAAA,CAAA,2BAAwB,CAAC,MAAM,GAAG,+OAAA,CAAA,2BAAwB,CAAC,SAAS;YAC9G,MAAM,aAAa,IAAI,CAAC,4BAA4B,CAAC,aAAa,IAAI,CAAC,4BAA4B,CAAC,KAAK;YACzG,IAAI,WAAW,MAAM,KAAK,GAAG;gBACzB,IAAI,CAAC,gBAAgB,CAAC,gBAAgB;gBACtC;YACJ;YACA,IAAI,CAAC,qBAAqB;gBACtB,IAAI,CAAC,wCAAwC,GAAG;YACpD;YACA,IAAI,CAAC,8BAA8B,IAAI;YACvC,IAAI,CAAC,gBAAgB,CAAC,aAAa;YACnC,IAAI,CAAC,uBAAuB,CAAC,YAAY,aAAa,IAAI,CAAC,UAAU,CAAC,KAAK;QAC/E;IACJ;IACA;;KAEC,GACD,cAAc,KAAK,EAAE,WAAW,EAAE;QAC9B,CAAA,GAAA,yOAAA,CAAA,aAAU,AAAD,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ;QAChC,MAAM,YAAY,IAAI,CAAC,OAAO,CAAC,YAAY;QAC3C,IAAI,QAAQ;QACZ,IAAI,MAAM,YAAY,MAAM;QAC5B,IAAI,CAAC,mPAAA,CAAA,QAAK,CAAC,OAAO,CAAC,cAAc,CAAC,mPAAA,CAAA,QAAK,CAAC,kBAAkB,CAAC,cAAc,mPAAA,CAAA,QAAK,CAAC,aAAa,CAAC,OAAO,YAAY;YAC5G,QAAQ,KAAK,GAAG,CAAC,GAAG,UAAU,WAAW,GAAG,MAAM,WAAW;YAC7D,MAAM,KAAK,GAAG,CAAC,MAAM,SAAS,EAAE,UAAU,SAAS,IAAI,MAAM,WAAW;QAC5E;QACA,OAAO;YAAE;YAAO;QAAI;IACxB;IACA,QAAQ;QACJ,IAAI,CAAC,MAAM,CAAC;QACZ,IAAI,CAAC,OAAO,CAAC,mCAAmC,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,EAAE,qBAAqB;QACnG,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC;QAC5B,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI;QACrC,6DAA6D;QAC7D,WAAW;YACP,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK;YACjC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,iBAAiB,CAAC,SAAS,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAoB,SAAS,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,YAAY,CAAC;QAC1K,GAAG;IACP;IACA,MAAM,wBAAwB,UAAU,EAAE,WAAW,EAAE,KAAK,EAAE;;QAC1D,MAAM,QAAQ;6CAAI;gBAAA;;mBAAS,MAAK,MAAM,CAAC,8BAA8B;;QACrE,MAAM;QACN,MAAM,mBAAmB,MAAM,CAAA,GAAA,yOAAA,CAAA,mBAAgB,AAAD,EAAE,QAAQ,UAAU,CAAC,aAAa;QAChF,IAAI,CAAC,gBAAgB,CAAC,gBAAgB;QACtC,IAAI,qBAAqB,WAAW;YAChC,MAAM;YACN;QACJ;QACA,MAAM,WAAW,iBAAiB,OAAO,CAAC,CAAA,kBAAmB,gBAAgB,MAAM,KAAK,eAAe,CAAA,GAAA,yOAAA,CAAA,YAAS,AAAD,EAAE,gBAAgB,KAAK,IAChI,gBAAgB,KAAK,GACrB,EAAE;QACR,MAAM,AAAC,gEAA+E,OAAhB,SAAS,MAAM,EAAC;QACtF,+CAA+C;QAC/C,MAAM,gBAAgB,0OAAA,CAAA,WAAe,CAAC,UAAU,CAAA,IAAK,EAAE,aAAa;QACpE,MAAM,AAAC,yBAA6C,OAArB,cAAc,MAAM,EAAC;QACpD,MAAM,qBAAqB,cAAc,MAAM,CAAC;gBAAC,EAAE,aAAa,EAAE;mBAAK,cAAc,IAAI,GAAG,MAAM,GAAG,KAAK,kBAAkB,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,IAAI,kBAAkB,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC;;QACxN,MAAM,AAAC,+BAA8C,OAAhB,SAAS,MAAM,EAAC;QACrD,mBAAmB,OAAO,CAAC,CAAA,IAAK,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,aAAa;QACpE,IAAI,mBAAmB,MAAM,GAAG,GAAG;YAC/B,MAAM;YACN;QACJ;QACA,sBAAsB;QACtB,MAAM;QACN,IAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC;QAC5C,6GAA6G;QAC7G,MAAM;QACN,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI;IACzC;IACA,QAAQ;QACJ,IAAI,CAAC,MAAM,CAAC;QACZ,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,kBAAkB,CAAC,KAAK;QAC7B,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI;IACzC;IACA,qBAAqB;QACjB,MAAM,gBAAgB,IAAI,CAAC,OAAO,CAAC,gBAAgB;QACnD,IAAI;QACJ,IAAI,cAAc,MAAM,GAAG,GAAG;YAC1B,sBAAsB,aAAa,CAAC,EAAE,CAAC,eAAe;QAC1D,OACK;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;YACtB,sBAAsB,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,IAAI,+CAA+C;QACrH;QACA,OAAO,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC;IAC1G;IACA,SAAgB;QAAT,IAAA,IAAA,OAAA,UAAA,QAAA,AAAG,OAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;YAAG,KAAH,QAAA,SAAA,CAAA,KAAO;;QACV,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,mBAAmB;IAC9C;IAzXA,YAAY,OAAO,EAAE,kBAAkB,EAAE,aAAa,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,WAAW,CAAE;QACxG,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,kBAAkB,GAAG;QAC1B,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,kBAAkB,GAAG;QAC1B,IAAI,CAAC,WAAW,GAAG;QACnB,2BAA2B;QAC3B,IAAI,CAAC,mBAAmB,GAAG;QAC3B,IAAI,CAAC,YAAY,GAAG,IAAI,6OAAA,CAAA,kBAAe;QACvC,IAAI,CAAC,kBAAkB,GAAG,6BAA6B,MAAM,CAAC;QAC9D,IAAI,CAAC,yBAAyB,GAAG;QACjC,IAAI,CAAC,8BAA8B,GAAG;QACtC,IAAI,CAAC,wCAAwC,GAAG;QAChD,IAAI,CAAC,WAAW,GAAG,IAAI;QACvB,IAAI,CAAC,4BAA4B,GAAG,IAAI,6OAAA,CAAA,YAAS;QACjD,IAAI,CAAC,gBAAgB,GAAG,IAAI;QAC5B,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB;QAC3C,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI;QAClC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAA;YACxD,IAAI,EAAE,UAAU,CAAC,GAAG,yBAAyB,MAAK;gBAC9C,IAAI,CAAC,WAAW;YACpB;QACJ;QACA,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,cAAc,qBAAqB,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI;IACtF;AAkWJ;AACA,eAAe,WAAW;IACtB,QAAQ,GAAG,6PAAA,CAAA,gBAAa;IACxB,QAAQ,GAAG,gQAAA,CAAA,qBAAkB;IAC7B,QAAQ,GAAG,gQAAA,CAAA,qBAAkB;IAC7B,QAAQ,GAAG,kPAAA,CAAA,cAAW;CACzB,EAAE;;AAEH,MAAM;IA8BF,UAAU;QACN,IAAI,CAAC,WAAW,CAAC,OAAO;QACxB,IAAI,CAAC,YAAY,CAAC,OAAO;IAC7B;IACA,gDAAgD;IAChD,OAAO,KAAiB,EAAE;YAAnB,EAAE,MAAM,EAAE,KAAK,EAAE,GAAjB;QACH,IAAI,CAAC,gBAAgB,GAAG;QACxB,IAAI,CAAC,aAAa,GAAG;IACzB;IACA,cAAc,UAAU,EAAE;QACtB,qCAAqC;QACrC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,GAAG;QAC9B,4BAA4B;QAC5B,MAAM,SAAS,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM;QAC3D,MAAM,QAAQ,IAAI,CAAC,cAAc,CAAC;QAClC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ;QAChC,+BAA+B;QAC/B,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,GAAG,AAAC,GAAS,OAAP,QAAO;QAC7C,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,GAAG,AAAC,GAAQ,OAAN,OAAM;QAC3C,uPAAA,CAAA,SAAW,CAAC,qOAAA,CAAA,WAAY,CAAC,iCAAiC,mCAAmC,WAAW,MAAM;IAClH;IACA,kBAAkB;QACd,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,GAAG;QACnC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,GAAG;QAClC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,EAAE;IAC1D;IACA,IAAI,cAAc;QACd,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM;IAClC;IACA,IAAI,mBAAmB;QACnB,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,GAAG;YAC/B;QACJ;QACA,MAAM,kBAAkB,IAAI,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC,EAAE;QACjE,IAAI,oBAAoB,WAAW;YAC/B,OAAO,gBAAgB,aAAa;QACxC;QACA,MAAM,iBAAiB,IAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC,EAAE;QAC/D,IAAI,mBAAmB,WAAW;YAC9B,OAAO,eAAe,aAAa;QACvC;QACA;IACJ;IACA,YAAY;QACR,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,GAAG;YAC/B,OAAO;QACX;QACA,MAAM,aAAa,IAAI,CAAC,WAAW,CAAC,QAAQ;QAC5C,IAAI,WAAW,MAAM,KAAK,GAAG;YACzB,IAAI,CAAC,WAAW,CAAC,UAAU;YAC3B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACxB,OAAO;QACX,OACK;YACD,IAAI,UAAU,CAAC,EAAE,KAAK,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG;gBAC/C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE;gBAC5B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,wEAAwE;gBACpG,OAAO;YACX,OACK;gBACD,IAAI,CAAC,WAAW,CAAC,SAAS;gBAC1B,MAAM,UAAU,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,EAAE;gBAC9C,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;gBACxB,OAAO;YACX;QACJ;IACJ;IACA;;KAEC,GACD,gBAAgB;QACZ,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,GAAG;YAC/B,OAAO;QACX;QACA,MAAM,aAAa,IAAI,CAAC,WAAW,CAAC,QAAQ;QAC5C,IAAI,WAAW,MAAM,KAAK,GAAG;YACzB,IAAI,CAAC,WAAW,CAAC,SAAS;YAC1B,MAAM,UAAU,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,EAAE;YAC9C,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACxB,OAAO;QACX,OACK;YACD,IAAI,UAAU,CAAC,EAAE,KAAK,GAAG;gBACrB,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE;gBAC5B,OAAO;YACX,OACK;gBACD,IAAI,CAAC,WAAW,CAAC,aAAa;gBAC9B,MAAM,UAAU,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,EAAE;gBAC9C,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;gBACxB,OAAO;YACX;QACJ;IACJ;IACA,aAAa;QACT,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE;IAChC;IACA,IAAI,uBAAuB;QACvB,MAAM,EAAE,WAAW,EAAE,GAAG,oBAAoB,aAAa,CAAC;YAAE,YAAY,IAAI,CAAC,WAAW;QAAC;QACzF,OAAO;IACX;IACA,gBAAgB,WAAW,EAAE;QACzB,MAAM,2BAA2B,IAAI,CAAC,oBAAoB,GAAG;QAC7D,MAAM,mBAAmB,GAAG,0DAA0D;QACtF,MAAM,SAAS,KAAK,GAAG,CAAC,0BAA0B,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,oBAAoB,GAAG;QACrG,OAAO;IACX;IACA,eAAe,UAAU,EAAE;QACvB,MAAM,wBAAwB,KAAK,IAAI,CAAC,KAAK,GAAG,IAAI,WAAW,GAAG,CAAC,CAAA,IAAK,EAAE,aAAa,CAAC,MAAM,KAAK,IAAI,CAAC,+BAA+B;QACvI,MAAM,QAAQ,KAAK,GAAG,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,WAAW,MAAK,GAAG,gBAAgB,MAAK,EAAE,eAAe,MAAK,wBAAwB,GAAG,sCAAsC,IAAG,mDAAmD;;QAElO,OAAO;IACX;IACA,OAAO,kBAAkB,SAAS,EAAE,mBAAmB,EAAE,QAAQ,EAAE;QAC/D,MAAM,kBAAkB,IAAI;YACxB,cAAc,OAAO,EAAE;gBACnB,OAAO;YACX;YACA,UAAU,OAAO,EAAE;gBACf,OAAO;YACX;QACJ;QACA,MAAM,WAAW,IAAI;YAIjB,eAAe,SAAS,EAAE;gBACtB,OAAO,IAAI,oBAAoB,WAAW;YAC9C;YACA,cAAc,SAAS,EAAE,KAAK,EAAE,YAAY,EAAE;gBAC1C,aAAa,QAAQ,CAAC;YAC1B;YACA,gBAAgB,YAAY,EAAE;gBAC1B,aAAa,OAAO;YACxB;YAXA,aAAc;gBACV,IAAI,CAAC,UAAU,GAAG;YACtB;QAUJ;QACA,OAAO,IAAI,6PAAA,CAAA,OAAI,CAAC,2BAA2B,WAAW,iBAAiB;YAAC;SAAS,EAAE;YAC/E,iBAAiB;YACjB,cAAc;YACd,0BAA0B;QAC9B;IACJ;IA1KA,gDAAgD;IAChD,YAAY,MAAM,EAAE,IAAI,CAAE;QACtB,IAAI,CAAC,YAAY,GAAG,IAAI,6OAAA,CAAA,kBAAe;QACvC,IAAI,CAAC,gBAAgB,GAAG;QACxB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,WAAW,GAAG,KAAK,QAAQ,CAAC,UAAU;QAC3C,IAAI,CAAC,+BAA+B,GAAG,KAAK,QAAQ,CAAC,8BAA8B;QACnF,IAAI,CAAC,cAAc,GAAG,SAAS,aAAa,CAAC;QAC7C,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG;QAChC,OAAO,WAAW,CAAC,IAAI,CAAC,cAAc;QACtC,IAAI,CAAC,WAAW,GAAG,wBAAwB,iBAAiB,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,oBAAoB,EAAE,KAAK,QAAQ;QAC1H,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAA;YAC9B,IAAI,EAAE,QAAQ,CAAC,MAAM,KAAK,GAAG;gBACzB,KAAK,aAAa,CAAC,EAAE,QAAQ,CAAC,EAAE,CAAC,aAAa;YAClD;QACJ,GAAG,IAAI,CAAC,YAAY;QACpB,IAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAA;YAClC,IAAI,EAAE,QAAQ,CAAC,MAAM,KAAK,GAAG;gBACzB,KAAK,iBAAiB;YAC1B;QACJ,GAAG,IAAI,CAAC,YAAY;QACpB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAA;YAC7C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE;QAChC;QACA,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA,GAAA,+PAAA,CAAA,gBAAa,AAAD,EAAE;YACjC,6BAA6B,0QAAA,CAAA,gCAA6B;YAC1D,6BAA6B,0QAAA,CAAA,gCAA6B;QAC9D;IACJ;AA+IJ;AACA,MAAM;IAMF,IAAI,UAAU;QACV,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,IAAI,CAAC,QAAQ,GAAG,SAAS,aAAa,CAAC;YACvC,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG;YAC1B,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,GAAG;YAC9B,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,GAAG;YACpC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,GAAG;YACjC,IAAI,CAAC,UAAU,GAAG,SAAS,aAAa,CAAC;YACzC,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG;YAC5B,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG;YACvB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG;YAC/B,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,cAAc,qOAAA,CAAA,WAAY,CAAC,mBAAmB;YAC3E,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU;YACzC,IAAI,CAAC,WAAW,GAAG,SAAS,aAAa,CAAC;YAC1C,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG;YAC7B,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,YAAY;YAC1C,IAAI,CAAC,mBAAmB,GAAG,qOAAA,CAAA,WAAY,CAAC,mCAAmC;YAC3E,IAAI,CAAC,sBAAsB,GAAG,qOAAA,CAAA,WAAY,CAAC,iCAAiC;YAC5E,IAAI,CAAC,YAAY,GAAG,CAAA,GAAA,kQAAA,CAAA,4BAAyB,AAAD,IAAI,iBAAiB,CAAC,CAAA,GAAA,wQAAA,CAAA,0BAAuB,AAAD,EAAE,YAAY,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,mBAAmB;YAChJ,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY;YACvC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW;YAC1C,+EAA+E;YAC/E,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,wOAAA,CAAA,wBAAyB,CAAC,IAAI,CAAC,KAAK,EAAE,wOAAA,CAAA,YAAa,CAAC,KAAK,EAAE,IAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI;YAClH,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,wOAAA,CAAA,wBAAyB,CAAC,IAAI,CAAC,KAAK,EAAE,wOAAA,CAAA,YAAa,CAAC,QAAQ,EAAE,CAAC;gBACjF,MAAM,WAAW,IAAI,kPAAA,CAAA,wBAAqB,CAAC;gBAC3C,IAAI,SAAS,OAAO,KAAK,GAAG,qBAAqB,OAAM,SAAS,OAAO,KAAK,GAAG,sBAAsB,KAAI;oBACrG,IAAI,CAAC,iBAAiB,CAAC,IAAI;gBAC/B;YACJ;YACA,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,wOAAA,CAAA,wBAAyB,CAAC,IAAI,CAAC,KAAK,EAAE,wOAAA,CAAA,YAAa,CAAC,KAAK,EAAE,IAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI;YAClH,gDAAgD;YAChD,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,wOAAA,CAAA,wBAAyB,CAAC,IAAI,CAAC,KAAK,EAAE,wOAAA,CAAA,YAAa,CAAC,KAAK,EAAE;gBAC7E,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,GAAG;gBAClC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,GAAG;gBAClC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,aAAa,GAAG;gBACnC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,GAAG;YACtC;YACA,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,wOAAA,CAAA,wBAAyB,CAAC,IAAI,CAAC,KAAK,EAAE,wOAAA,CAAA,YAAa,CAAC,IAAI,EAAE;gBAC5E,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG;YACjC;QACJ;QACA,OAAO,IAAI,CAAC,QAAQ;IACxB;IACA,IAAI,QAAQ;QACR,CAAA,GAAA,yOAAA,CAAA,aAAU,AAAD,EAAE,IAAI,CAAC,UAAU;QAC1B,OAAO,IAAI,CAAC,UAAU;IAC1B;IACA,IAAI,SAAS;QACT,CAAA,GAAA,yOAAA,CAAA,aAAU,AAAD,EAAE,IAAI,CAAC,WAAW;QAC3B,OAAO,IAAI,CAAC,WAAW;IAC3B;IACA,IAAI,cAAc;QACd,OAAO,IAAI,CAAC,YAAY;IAC5B;IACA,mBAAmB;YAMf;QALA,IAAI,CAAC,YAAY,GAAG;;QACpB,sBAAA,IAAI,CAAC,+EAAL,IAAI,CAAC,eAAiB,CAAA,GAAA,kQAAA,CAAA,aAAU,AAAD,EAAE,4OAAA,CAAA,UAAO,CAAC,OAAO;QAChD,wOAAA,CAAA,YAAa,CAAC,IAAI,CAAC,MAAM;QACzB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY;QACzC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,cAAc;SACvC,qBAAA,IAAI,CAAC,YAAY,cAAjB,yCAAA,mBAAmB,MAAM,CAAC,IAAI,CAAC,mBAAmB;QAClD,IAAI,CAAC,KAAK,CAAC,KAAK;IACpB;IACA,gBAAgB;YAMZ;QALA,IAAI,CAAC,YAAY,GAAG;;QACpB,mBAAA,IAAI,CAAC,sEAAL,IAAI,CAAC,YAAc,CAAA,GAAA,kQAAA,CAAA,aAAU,AAAD,EAAE,4OAAA,CAAA,UAAO,CAAC,eAAe;QACrD,wOAAA,CAAA,YAAa,CAAC,IAAI,CAAC,MAAM;QACzB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS;QACtC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,cAAc;SACvC,qBAAA,IAAI,CAAC,YAAY,cAAjB,yCAAA,mBAAmB,MAAM,CAAC,IAAI,CAAC,sBAAsB;QACrD,IAAI,CAAC,KAAK,CAAC,KAAK;IACpB;IACA,UAAU;QACN,IAAI,CAAC,YAAY,CAAC,OAAO;IAC7B;IA/EA,aAAc;QACV,IAAI,CAAC,iBAAiB,GAAG,IAAI,yOAAA,CAAA,UAAO;QACpC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK;QACpD,IAAI,CAAC,YAAY,GAAG,IAAI,6OAAA,CAAA,kBAAe;IAC3C;AA4EJ;AACA,MAAM;IAwBF,SAAS,KAAK,EAAE;QACZ,IAAI,CAAC,WAAW,CAAC;QACjB,IAAI,CAAC,YAAY,CAAC;IACtB;IACA,YAAY,KAAK,EAAE;YACS;QAAxB,MAAM,gBAAgB,CAAC,GAAC,cAAA,MAAM,IAAI,cAAV,kCAAA,YAAY,QAAQ,CAAC,+OAAA,CAAA,mBAAgB,CAAC,WAAW;QACzE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,gBAAgB,YAAY;IAC3D;IACA,aAAa,KAAK,EAAE;QAChB,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,MAAM,aAAa;IAC/C;IACA,OAAO,cAAc,KAAc,EAAE;YAAhB,EAAE,UAAU,EAAE,GAAd;QACjB,MAAM,cAAc,aAAa,oBAAoB,QAAQ,GAAG,EAAE,wBAAwB;QAC1F,OAAO;YAAE;QAAY;IACzB;IACA,UAAU,CACV;IAtCA,YAAY,MAAM,EAAE,QAAQ,CAAE;QAC1B,IAAI,CAAC,QAAQ,GAAG,SAAS,aAAa,CAAC;QACvC,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG;QAC1B,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,GAAI;QAC/B,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,GAAI;QACjC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,GAAI;QAClC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAG,AAAC,GAAsB,OAApB,SAAS,UAAU,EAAC;QACpD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,GAAG,AAAC,GAA+B,OAA7B,oBAAoB,QAAQ,EAAC;QAC9D,kFAAkF;QAClF,MAAM,gBAAgB,SAAS,aAAa,CAAC;QAC7C,cAAc,KAAK,CAAC,OAAO,GAAI;QAC/B,cAAc,KAAK,CAAC,UAAU,GAAI;QAClC,cAAc,KAAK,CAAC,KAAK,GAAG,cAAc,KAAK,CAAC,MAAM,GAAG,AAAC,GAA4B,OAA1B,SAAS,UAAU,GAAG,KAAI;QACtF,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,CAAA,GAAA,kQAAA,CAAA,aAAU,AAAD,EAAE,4OAAA,CAAA,UAAO,CAAC,OAAO;QACvC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,GAAI;QAC5B,cAAc,WAAW,CAAC,IAAI,CAAC,KAAK;QACpC,IAAI,CAAC,MAAM,GAAG,SAAS,aAAa,CAAC;QACrC,4PAAA,CAAA,gBAAyB,CAAC,IAAI,CAAC,MAAM,EAAE;QACvC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM;QACrC,OAAO,WAAW,CAAC,IAAI,CAAC,QAAQ;IACpC;AAkBJ;AAzCM,oBACY,QAAQ,GAAG","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 819, "column": 0}, "map": {"version":3,"sources":["file:///Users/jloka/Documents/repos/personal/shared-workshop/node_modules/.pnpm/monaco-editor%400.52.2/node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar RenameController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { CancellationError, onUnexpectedError } from '../../../../base/common/errors.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { NewSymbolNameTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameWidget } from './renameWidget.js';\nclass RenameSkeleton {\n    constructor(model, position, registry) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = registry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    async resolveRenameLocation(token) {\n        const rejects = [];\n        for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n            const provider = this._providers[this._providerRenameIdx];\n            if (!provider.resolveRenameLocation) {\n                break;\n            }\n            const res = await provider.resolveRenameLocation(this.model, this.position, token);\n            if (!res) {\n                continue;\n            }\n            if (res.rejectReason) {\n                rejects.push(res.rejectReason);\n                continue;\n            }\n            return res;\n        }\n        // we are here when no provider prepared a location which means we can\n        // just rely on the word under cursor and start with the first provider\n        this._providerRenameIdx = 0;\n        const word = this.model.getWordAtPosition(this.position);\n        if (!word) {\n            return {\n                range: Range.fromPositions(this.position),\n                text: '',\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        }\n        return {\n            range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n            text: word.word,\n            rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n        };\n    }\n    async provideRenameEdits(newName, token) {\n        return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n    }\n    async _provideRenameEdits(newName, i, rejects, token) {\n        const provider = this._providers[i];\n        if (!provider) {\n            return {\n                edits: [],\n                rejectReason: rejects.join('\\n')\n            };\n        }\n        const result = await provider.provideRenameEdits(this.model, this.position, newName, token);\n        if (!result) {\n            return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n        }\n        else if (result.rejectReason) {\n            return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n        }\n        return result;\n    }\n}\nexport async function rename(registry, model, position, newName) {\n    const skeleton = new RenameSkeleton(model, position, registry);\n    const loc = await skeleton.resolveRenameLocation(CancellationToken.None);\n    if (loc?.rejectReason) {\n        return { edits: [], rejectReason: loc.rejectReason };\n    }\n    return skeleton.provideRenameEdits(newName, CancellationToken.None);\n}\n// ---  register actions and commands\nlet RenameController = class RenameController {\n    static { RenameController_1 = this; }\n    static { this.ID = 'editor.contrib.renameController'; }\n    static get(editor) {\n        return editor.getContribution(RenameController_1.ID);\n    }\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService, _telemetryService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._telemetryService = _telemetryService;\n        this._disposableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameWidget = this._disposableStore.add(this._instaService.createInstance(RenameWidget, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']));\n    }\n    dispose() {\n        this._disposableStore.dispose();\n        this._cts.dispose(true);\n    }\n    async run() {\n        const trace = this._logService.trace.bind(this._logService, '[rename]');\n        // set up cancellation token to prevent reentrant rename, this\n        // is the parent to the resolve- and rename-tokens\n        this._cts.dispose(true);\n        this._cts = new CancellationTokenSource();\n        if (!this.editor.hasModel()) {\n            trace('editor has no model');\n            return undefined;\n        }\n        const position = this.editor.getPosition();\n        const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n        if (!skeleton.hasProvider()) {\n            trace('skeleton has no provider');\n            return undefined;\n        }\n        // part 1 - resolve rename location\n        const cts1 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, undefined, this._cts.token);\n        let loc;\n        try {\n            trace('resolving rename location');\n            const resolveLocationOperation = skeleton.resolveRenameLocation(cts1.token);\n            this._progressService.showWhile(resolveLocationOperation, 250);\n            loc = await resolveLocationOperation;\n            trace('resolved rename location');\n        }\n        catch (e) {\n            if (e instanceof CancellationError) {\n                trace('resolve rename location cancelled', JSON.stringify(e, null, '\\t'));\n            }\n            else {\n                trace('resolve rename location failed', e instanceof Error ? e : JSON.stringify(e, null, '\\t'));\n                if (typeof e === 'string' || isMarkdownString(e)) {\n                    MessageController.get(this.editor)?.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                }\n            }\n            return undefined;\n        }\n        finally {\n            cts1.dispose();\n        }\n        if (!loc) {\n            trace('returning early - no loc');\n            return undefined;\n        }\n        if (loc.rejectReason) {\n            trace(`returning early - rejected with reason: ${loc.rejectReason}`, loc.rejectReason);\n            MessageController.get(this.editor)?.showMessage(loc.rejectReason, position);\n            return undefined;\n        }\n        if (cts1.token.isCancellationRequested) {\n            trace('returning early - cts1 cancelled');\n            return undefined;\n        }\n        // part 2 - do rename at location\n        const cts2 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, loc.range, this._cts.token);\n        const model = this.editor.getModel(); // @ulugbekna: assumes editor still has a model, otherwise, cts1 should've been cancelled\n        const newSymbolNamesProviders = this._languageFeaturesService.newSymbolNamesProvider.all(model);\n        const resolvedNewSymbolnamesProviders = await Promise.all(newSymbolNamesProviders.map(async (p) => [p, await p.supportsAutomaticNewSymbolNamesTriggerKind ?? false]));\n        const requestRenameSuggestions = (triggerKind, cts) => {\n            let providers = resolvedNewSymbolnamesProviders.slice();\n            if (triggerKind === NewSymbolNameTriggerKind.Automatic) {\n                providers = providers.filter(([_, supportsAutomatic]) => supportsAutomatic);\n            }\n            return providers.map(([p,]) => p.provideNewSymbolNames(model, loc.range, triggerKind, cts));\n        };\n        trace('creating rename input field and awaiting its result');\n        const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n        const inputFieldResult = await this._renameWidget.getInput(loc.range, loc.text, supportPreview, newSymbolNamesProviders.length > 0 ? requestRenameSuggestions : undefined, cts2);\n        trace('received response from rename input field');\n        if (newSymbolNamesProviders.length > 0) { // @ulugbekna: we're interested only in telemetry for rename suggestions currently\n            this._reportTelemetry(newSymbolNamesProviders.length, model.getLanguageId(), inputFieldResult);\n        }\n        // no result, only hint to focus the editor or not\n        if (typeof inputFieldResult === 'boolean') {\n            trace(`returning early - rename input field response - ${inputFieldResult}`);\n            if (inputFieldResult) {\n                this.editor.focus();\n            }\n            cts2.dispose();\n            return undefined;\n        }\n        this.editor.focus();\n        trace('requesting rename edits');\n        const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, cts2.token), cts2.token).then(async (renameResult) => {\n            if (!renameResult) {\n                trace('returning early - no rename edits result');\n                return;\n            }\n            if (!this.editor.hasModel()) {\n                trace('returning early - no model after rename edits are provided');\n                return;\n            }\n            if (renameResult.rejectReason) {\n                trace(`returning early - rejected with reason: ${renameResult.rejectReason}`);\n                this._notificationService.info(renameResult.rejectReason);\n                return;\n            }\n            // collapse selection to active end\n            this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n            trace('applying edits');\n            this._bulkEditService.apply(renameResult, {\n                editor: this.editor,\n                showPreview: inputFieldResult.wantsPreview,\n                label: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc?.text, inputFieldResult.newName),\n                code: 'undoredo.rename',\n                quotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc?.text, inputFieldResult.newName),\n                respectAutoSaveConfig: true\n            }).then(result => {\n                trace('edits applied');\n                if (result.ariaSummary) {\n                    alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                }\n            }).catch(err => {\n                trace(`error when applying edits ${JSON.stringify(err, null, '\\t')}`);\n                this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                this._logService.error(err);\n            });\n        }, err => {\n            trace('error when providing rename edits', JSON.stringify(err, null, '\\t'));\n            this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n            this._logService.error(err);\n        }).finally(() => {\n            cts2.dispose();\n        });\n        trace('returning rename operation');\n        this._progressService.showWhile(renameOperation, 250);\n        return renameOperation;\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameWidget.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameWidget.cancelInput(true, 'cancelRenameInput command');\n    }\n    focusNextRenameSuggestion() {\n        this._renameWidget.focusNextRenameSuggestion();\n    }\n    focusPreviousRenameSuggestion() {\n        this._renameWidget.focusPreviousRenameSuggestion();\n    }\n    _reportTelemetry(nRenameSuggestionProviders, languageId, inputFieldResult) {\n        const value = typeof inputFieldResult === 'boolean'\n            ? {\n                kind: 'cancelled',\n                languageId,\n                nRenameSuggestionProviders,\n            }\n            : {\n                kind: 'accepted',\n                languageId,\n                nRenameSuggestionProviders,\n                source: inputFieldResult.stats.source.k,\n                nRenameSuggestions: inputFieldResult.stats.nRenameSuggestions,\n                timeBeforeFirstInputFieldEdit: inputFieldResult.stats.timeBeforeFirstInputFieldEdit,\n                wantsPreview: inputFieldResult.wantsPreview,\n                nRenameSuggestionsInvocations: inputFieldResult.stats.nRenameSuggestionsInvocations,\n                hadAutomaticRenameSuggestionsInvocation: inputFieldResult.stats.hadAutomaticRenameSuggestionsInvocation,\n            };\n        this._telemetryService.publicLog2('renameInvokedEvent', value);\n    }\n};\nRenameController = RenameController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService),\n    __param(7, ILanguageFeaturesService),\n    __param(8, ITelemetryService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const logService = accessor.get(ILogService);\n        const controller = RenameController.get(editor);\n        if (controller) {\n            logService.trace('[RenameAction] got controller, running...');\n            return controller.run();\n        }\n        logService.trace('[RenameAction] returning early - controller missing');\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 2048 /* KeyMod.CtrlCmd */ + 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterAction2(class FocusNextRenameSuggestion extends Action2 {\n    constructor() {\n        super({\n            id: 'focusNextRenameSuggestion',\n            title: {\n                ...nls.localize2('focusNextRenameSuggestion', \"Focus Next Rename Suggestion\"),\n            },\n            precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n            keybinding: [\n                {\n                    primary: 18 /* KeyCode.DownArrow */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n                }\n            ]\n        });\n    }\n    run(accessor) {\n        const currentEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (!currentEditor) {\n            return;\n        }\n        const controller = RenameController.get(currentEditor);\n        if (!controller) {\n            return;\n        }\n        controller.focusNextRenameSuggestion();\n    }\n});\nregisterAction2(class FocusPreviousRenameSuggestion extends Action2 {\n    constructor() {\n        super({\n            id: 'focusPreviousRenameSuggestion',\n            title: {\n                ...nls.localize2('focusPreviousRenameSuggestion', \"Focus Previous Rename Suggestion\"),\n            },\n            precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n            keybinding: [\n                {\n                    primary: 16 /* KeyCode.UpArrow */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n                }\n            ]\n        });\n    }\n    run(accessor) {\n        const currentEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (!currentEditor) {\n            return;\n        }\n        const controller = RenameController.get(currentEditor);\n        if (!controller) {\n            return;\n        }\n        controller.focusPreviousRenameSuggestion();\n    }\n});\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', async function (accessor, model, position) {\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    const skeleton = new RenameSkeleton(model, position, renameProvider);\n    const loc = await skeleton.resolveRenameLocation(CancellationToken.None);\n    if (loc?.rejectReason) {\n        throw new Error(loc.rejectReason);\n    }\n    return loc;\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}}]
}