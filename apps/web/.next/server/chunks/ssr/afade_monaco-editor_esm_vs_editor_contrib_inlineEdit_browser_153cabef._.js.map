{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/jloka/Documents/repos/personal/shared-workshop/node_modules/.pnpm/monaco-editor%400.52.2/node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/commandIds.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const inlineEditAcceptId = 'editor.action.inlineEdit.accept';\nexport const inlineEditRejectId = 'editor.action.inlineEdit.reject';\nexport const inlineEditJumpToId = 'editor.action.inlineEdit.jumpTo';\nexport const inlineEditJumpBackId = 'editor.action.inlineEdit.jumpBack';\n"],"names":[],"mappings":"AAAA;;;8FAG8F;;;;;;AACvF,MAAM,qBAAqB;AAC3B,MAAM,qBAAqB;AAC3B,MAAM,qBAAqB;AAC3B,MAAM,uBAAuB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/jloka/Documents/repos/personal/shared-workshop/node_modules/.pnpm/monaco-editor%400.52.2/node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/ghostTextWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { derived, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport './inlineEdit.css';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { ColumnRange, applyObservableDecorations } from '../../inlineCompletions/browser/utils.js';\nimport { diffDeleteDecoration, diffLineDeleteDecorationBackgroundWithIndicator } from '../../../browser/widget/diffEditor/registrations.contribution.js';\nexport const INLINE_EDIT_DESCRIPTION = 'inline-edit';\nlet GhostTextWidget = class GhostTextWidget extends Disposable {\n    constructor(editor, model, languageService) {\n        super();\n        this.editor = editor;\n        this.model = model;\n        this.languageService = languageService;\n        this.isDisposed = observableValue(this, false);\n        this.currentTextModel = observableFromEvent(this, this.editor.onDidChangeModel, () => /** @description editor.model */ this.editor.getModel());\n        this.uiState = derived(this, reader => {\n            if (this.isDisposed.read(reader)) {\n                return undefined;\n            }\n            const textModel = this.currentTextModel.read(reader);\n            if (textModel !== this.model.targetTextModel.read(reader)) {\n                return undefined;\n            }\n            const ghostText = this.model.ghostText.read(reader);\n            if (!ghostText) {\n                return undefined;\n            }\n            let range = this.model.range?.read(reader);\n            //if range is empty, we want to remove it\n            if (range && range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn) {\n                range = undefined;\n            }\n            //check if both range and text are single line - in this case we want to do inline replacement\n            //rather than replacing whole lines\n            const isSingleLine = (range ? range.startLineNumber === range.endLineNumber : true) && ghostText.parts.length === 1 && ghostText.parts[0].lines.length === 1;\n            //check if we're just removing code\n            const isPureRemove = ghostText.parts.length === 1 && ghostText.parts[0].lines.every(l => l.length === 0);\n            const inlineTexts = [];\n            const additionalLines = [];\n            function addToAdditionalLines(lines, className) {\n                if (additionalLines.length > 0) {\n                    const lastLine = additionalLines[additionalLines.length - 1];\n                    if (className) {\n                        lastLine.decorations.push(new LineDecoration(lastLine.content.length + 1, lastLine.content.length + 1 + lines[0].length, className, 0 /* InlineDecorationType.Regular */));\n                    }\n                    lastLine.content += lines[0];\n                    lines = lines.slice(1);\n                }\n                for (const line of lines) {\n                    additionalLines.push({\n                        content: line,\n                        decorations: className ? [new LineDecoration(1, line.length + 1, className, 0 /* InlineDecorationType.Regular */)] : []\n                    });\n                }\n            }\n            const textBufferLine = textModel.getLineContent(ghostText.lineNumber);\n            let hiddenTextStartColumn = undefined;\n            let lastIdx = 0;\n            if (!isPureRemove && (isSingleLine || !range)) {\n                for (const part of ghostText.parts) {\n                    let lines = part.lines;\n                    //If remove range is set, we want to push all new liens to virtual area\n                    if (range && !isSingleLine) {\n                        addToAdditionalLines(lines, INLINE_EDIT_DESCRIPTION);\n                        lines = [];\n                    }\n                    if (hiddenTextStartColumn === undefined) {\n                        inlineTexts.push({\n                            column: part.column,\n                            text: lines[0],\n                            preview: part.preview,\n                        });\n                        lines = lines.slice(1);\n                    }\n                    else {\n                        addToAdditionalLines([textBufferLine.substring(lastIdx, part.column - 1)], undefined);\n                    }\n                    if (lines.length > 0) {\n                        addToAdditionalLines(lines, INLINE_EDIT_DESCRIPTION);\n                        if (hiddenTextStartColumn === undefined && part.column <= textBufferLine.length) {\n                            hiddenTextStartColumn = part.column;\n                        }\n                    }\n                    lastIdx = part.column - 1;\n                }\n                if (hiddenTextStartColumn !== undefined) {\n                    addToAdditionalLines([textBufferLine.substring(lastIdx)], undefined);\n                }\n            }\n            const hiddenRange = hiddenTextStartColumn !== undefined ? new ColumnRange(hiddenTextStartColumn, textBufferLine.length + 1) : undefined;\n            const lineNumber = (isSingleLine || !range) ? ghostText.lineNumber : range.endLineNumber - 1;\n            return {\n                inlineTexts,\n                additionalLines,\n                hiddenRange,\n                lineNumber,\n                additionalReservedLineCount: this.model.minReservedLineCount.read(reader),\n                targetTextModel: textModel,\n                range,\n                isSingleLine,\n                isPureRemove,\n            };\n        });\n        this.decorations = derived(this, reader => {\n            const uiState = this.uiState.read(reader);\n            if (!uiState) {\n                return [];\n            }\n            const decorations = [];\n            if (uiState.hiddenRange) {\n                decorations.push({\n                    range: uiState.hiddenRange.toRange(uiState.lineNumber),\n                    options: { inlineClassName: 'inline-edit-hidden', description: 'inline-edit-hidden', }\n                });\n            }\n            if (uiState.range) {\n                const ranges = [];\n                if (uiState.isSingleLine) {\n                    ranges.push(uiState.range);\n                }\n                else if (!uiState.isPureRemove) {\n                    const lines = uiState.range.endLineNumber - uiState.range.startLineNumber;\n                    for (let i = 0; i < lines; i++) {\n                        const line = uiState.range.startLineNumber + i;\n                        const firstNonWhitespace = uiState.targetTextModel.getLineFirstNonWhitespaceColumn(line);\n                        const lastNonWhitespace = uiState.targetTextModel.getLineLastNonWhitespaceColumn(line);\n                        const range = new Range(line, firstNonWhitespace, line, lastNonWhitespace);\n                        ranges.push(range);\n                    }\n                }\n                for (const range of ranges) {\n                    decorations.push({\n                        range,\n                        options: diffDeleteDecoration\n                    });\n                }\n            }\n            if (uiState.range && !uiState.isSingleLine && uiState.isPureRemove) {\n                const r = new Range(uiState.range.startLineNumber, 1, uiState.range.endLineNumber - 1, 1);\n                decorations.push({\n                    range: r,\n                    options: diffLineDeleteDecorationBackgroundWithIndicator\n                });\n            }\n            for (const p of uiState.inlineTexts) {\n                decorations.push({\n                    range: Range.fromPositions(new Position(uiState.lineNumber, p.column)),\n                    options: {\n                        description: INLINE_EDIT_DESCRIPTION,\n                        after: { content: p.text, inlineClassName: p.preview ? 'inline-edit-decoration-preview' : 'inline-edit-decoration', cursorStops: InjectedTextCursorStops.Left },\n                        showIfCollapsed: true,\n                    }\n                });\n            }\n            return decorations;\n        });\n        this._register(toDisposable(() => { this.isDisposed.set(true, undefined); }));\n        this._register(applyObservableDecorations(this.editor, this.decorations));\n    }\n};\nGhostTextWidget = __decorate([\n    __param(2, ILanguageService)\n], GhostTextWidget);\nexport { GhostTextWidget };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///Users/jloka/Documents/repos/personal/shared-workshop/node_modules/.pnpm/monaco-editor%400.52.2/node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/inlineEditHintsWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar InlineEditHintsContentWidget_1;\nimport { h } from '../../../../base/browser/dom.js';\nimport { KeybindingLabel, unthemedKeybindingLabelOptions } from '../../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { Separator } from '../../../../base/common/actions.js';\nimport { equals } from '../../../../base/common/arrays.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent } from '../../../../base/common/observable.js';\nimport { OS } from '../../../../base/common/platform.js';\nimport './inlineEditHintsWidget.css';\nimport { Position } from '../../../common/core/position.js';\nimport { MenuEntryActionViewItem, createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { WorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nlet InlineEditHintsWidget = class InlineEditHintsWidget extends Disposable {\n    constructor(editor, model, instantiationService) {\n        super();\n        this.editor = editor;\n        this.model = model;\n        this.instantiationService = instantiationService;\n        this.alwaysShowToolbar = observableFromEvent(this, this.editor.onDidChangeConfiguration, () => this.editor.getOption(63 /* EditorOption.inlineEdit */).showToolbar === 'always');\n        this.sessionPosition = undefined;\n        this.position = derived(this, reader => {\n            const ghostText = this.model.read(reader)?.model.ghostText.read(reader);\n            if (!this.alwaysShowToolbar.read(reader) || !ghostText || ghostText.parts.length === 0) {\n                this.sessionPosition = undefined;\n                return null;\n            }\n            const firstColumn = ghostText.parts[0].column;\n            if (this.sessionPosition && this.sessionPosition.lineNumber !== ghostText.lineNumber) {\n                this.sessionPosition = undefined;\n            }\n            const position = new Position(ghostText.lineNumber, Math.min(firstColumn, this.sessionPosition?.column ?? Number.MAX_SAFE_INTEGER));\n            this.sessionPosition = position;\n            return position;\n        });\n        this._register(autorunWithStore((reader, store) => {\n            /** @description setup content widget */\n            const model = this.model.read(reader);\n            if (!model || !this.alwaysShowToolbar.read(reader)) {\n                return;\n            }\n            const contentWidget = store.add(this.instantiationService.createInstance(InlineEditHintsContentWidget, this.editor, true, this.position));\n            editor.addContentWidget(contentWidget);\n            store.add(toDisposable(() => editor.removeContentWidget(contentWidget)));\n        }));\n    }\n};\nInlineEditHintsWidget = __decorate([\n    __param(2, IInstantiationService)\n], InlineEditHintsWidget);\nexport { InlineEditHintsWidget };\nlet InlineEditHintsContentWidget = class InlineEditHintsContentWidget extends Disposable {\n    static { InlineEditHintsContentWidget_1 = this; }\n    static { this._dropDownVisible = false; }\n    static { this.id = 0; }\n    constructor(editor, withBorder, _position, instantiationService, _contextKeyService, _menuService) {\n        super();\n        this.editor = editor;\n        this.withBorder = withBorder;\n        this._position = _position;\n        this._contextKeyService = _contextKeyService;\n        this._menuService = _menuService;\n        this.id = `InlineEditHintsContentWidget${InlineEditHintsContentWidget_1.id++}`;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this.nodes = h('div.inlineEditHints', { className: this.withBorder ? '.withBorder' : '' }, [\n            h('div@toolBar'),\n        ]);\n        this.inlineCompletionsActionsMenus = this._register(this._menuService.createMenu(MenuId.InlineEditActions, this._contextKeyService));\n        this.toolBar = this._register(instantiationService.createInstance(CustomizedMenuWorkbenchToolBar, this.nodes.toolBar, this.editor, MenuId.InlineEditToolbar, {\n            menuOptions: { renderShortTitle: true },\n            toolbarOptions: { primaryGroup: g => g.startsWith('primary') },\n            actionViewItemProvider: (action, options) => {\n                if (action instanceof MenuItemAction) {\n                    return instantiationService.createInstance(StatusBarViewItem, action, undefined);\n                }\n                return undefined;\n            },\n            telemetrySource: 'InlineEditToolbar',\n        }));\n        this._register(this.toolBar.onDidChangeDropdownVisibility(e => {\n            InlineEditHintsContentWidget_1._dropDownVisible = e;\n        }));\n        this._register(autorun(reader => {\n            /** @description update position */\n            this._position.read(reader);\n            this.editor.layoutContentWidget(this);\n        }));\n        this._register(autorun(reader => {\n            /** @description actions menu */\n            const extraActions = [];\n            for (const [_, group] of this.inlineCompletionsActionsMenus.getActions()) {\n                for (const action of group) {\n                    if (action instanceof MenuItemAction) {\n                        extraActions.push(action);\n                    }\n                }\n            }\n            if (extraActions.length > 0) {\n                extraActions.unshift(new Separator());\n            }\n            this.toolBar.setAdditionalSecondaryActions(extraActions);\n        }));\n    }\n    getId() { return this.id; }\n    getDomNode() {\n        return this.nodes.root;\n    }\n    getPosition() {\n        return {\n            position: this._position.get(),\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */],\n            positionAffinity: 3 /* PositionAffinity.LeftOfInjectedText */,\n        };\n    }\n};\nInlineEditHintsContentWidget = InlineEditHintsContentWidget_1 = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, IContextKeyService),\n    __param(5, IMenuService)\n], InlineEditHintsContentWidget);\nexport { InlineEditHintsContentWidget };\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            const div = h('div.keybinding').root;\n            const k = this._register(new KeybindingLabel(div, OS, { disableTitle: true, ...unthemedKeybindingLabelOptions }));\n            k.set(kb);\n            this.label.textContent = this._action.label;\n            this.label.appendChild(div);\n            this.label.classList.add('inlineEditStatusBarItemLabel');\n        }\n    }\n    updateTooltip() {\n        // NOOP, disable tooltip\n    }\n}\nlet CustomizedMenuWorkbenchToolBar = class CustomizedMenuWorkbenchToolBar extends WorkbenchToolBar {\n    constructor(container, editor, menuId, options2, menuService, contextKeyService, contextMenuService, keybindingService, commandService, telemetryService) {\n        super(container, { resetMenu: menuId, ...options2 }, menuService, contextKeyService, contextMenuService, keybindingService, commandService, telemetryService);\n        this.editor = editor;\n        this.menuId = menuId;\n        this.options2 = options2;\n        this.menuService = menuService;\n        this.contextKeyService = contextKeyService;\n        this.menu = this._store.add(this.menuService.createMenu(this.menuId, this.contextKeyService, { emitEventsForSubmenuChanges: true }));\n        this.additionalActions = [];\n        this.prependedPrimaryActions = [];\n        this._store.add(this.menu.onDidChange(() => this.updateToolbar()));\n        this._store.add(this.editor.onDidChangeCursorPosition(() => this.updateToolbar()));\n        this.updateToolbar();\n    }\n    updateToolbar() {\n        const primary = [];\n        const secondary = [];\n        createAndFillInActionBarActions(this.menu, this.options2?.menuOptions, { primary, secondary }, this.options2?.toolbarOptions?.primaryGroup, this.options2?.toolbarOptions?.shouldInlineSubmenu, this.options2?.toolbarOptions?.useSeparatorsInPrimaryActions);\n        secondary.push(...this.additionalActions);\n        primary.unshift(...this.prependedPrimaryActions);\n        this.setActions(primary, secondary);\n    }\n    setAdditionalSecondaryActions(actions) {\n        if (equals(this.additionalActions, actions, (a, b) => a === b)) {\n            return;\n        }\n        this.additionalActions = actions;\n        this.updateToolbar();\n    }\n};\nCustomizedMenuWorkbenchToolBar = __decorate([\n    __param(4, IMenuService),\n    __param(5, IContextKeyService),\n    __param(6, IContextMenuService),\n    __param(7, IKeybindingService),\n    __param(8, ICommandService),\n    __param(9, ITelemetryService)\n], CustomizedMenuWorkbenchToolBar);\nexport { CustomizedMenuWorkbenchToolBar };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 492, "column": 0}, "map": {"version":3,"sources":["file:///Users/jloka/Documents/repos/personal/shared-workshop/node_modules/.pnpm/monaco-editor%400.52.2/node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/inlineEditSideBySideWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar InlineEditSideBySideWidget_1, InlineEditSideBySideContentWidget_1;\nimport { $ } from '../../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ObservablePromise, autorun, autorunWithStore, derived, observableSignalFromEvent } from '../../../../base/common/observable.js';\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './inlineEditSideBySideWidget.css';\nimport { observableCodeEditor } from '../../../browser/observableCodeEditor.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { IDiffProviderFactoryService } from '../../../browser/widget/diffEditor/diffProviderFactoryService.js';\nimport { diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from '../../../browser/widget/diffEditor/registrations.contribution.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../common/languages/modesRegistry.js';\nimport { TextModel } from '../../../common/model/textModel.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nfunction* range(start, end, step = 1) {\n    if (end === undefined) {\n        [end, start] = [start, 0];\n    }\n    for (let n = start; n < end; n += step) {\n        yield n;\n    }\n}\nfunction removeIndentation(lines) {\n    const indentation = lines[0].match(/^\\s*/)?.[0] ?? '';\n    const length = indentation.length;\n    return {\n        text: lines.map(l => l.replace(new RegExp('^' + indentation), '')),\n        shift: length\n    };\n}\nlet InlineEditSideBySideWidget = class InlineEditSideBySideWidget extends Disposable {\n    static { InlineEditSideBySideWidget_1 = this; }\n    static { this._modelId = 0; }\n    static _createUniqueUri() {\n        return URI.from({ scheme: 'inline-edit-widget', path: new Date().toString() + String(InlineEditSideBySideWidget_1._modelId++) });\n    }\n    constructor(_editor, _model, _instantiationService, _diffProviderFactoryService, _modelService) {\n        super();\n        this._editor = _editor;\n        this._model = _model;\n        this._instantiationService = _instantiationService;\n        this._diffProviderFactoryService = _diffProviderFactoryService;\n        this._modelService = _modelService;\n        this._position = derived(this, reader => {\n            const ghostText = this._model.read(reader);\n            if (!ghostText || ghostText.text.length === 0) {\n                return null;\n            }\n            if (ghostText.range.startLineNumber === ghostText.range.endLineNumber && !(ghostText.range.startColumn === ghostText.range.endColumn && ghostText.range.startColumn === 1)) {\n                //for inner-line suggestions we still want to use minimal ghost text\n                return null;\n            }\n            const editorModel = this._editor.getModel();\n            if (!editorModel) {\n                return null;\n            }\n            const lines = Array.from(range(ghostText.range.startLineNumber, ghostText.range.endLineNumber + 1));\n            const lengths = lines.map(lineNumber => editorModel.getLineLastNonWhitespaceColumn(lineNumber));\n            const maxColumn = Math.max(...lengths);\n            const lineOfMaxColumn = lines[lengths.indexOf(maxColumn)];\n            const position = new Position(lineOfMaxColumn, maxColumn);\n            const pos = {\n                top: ghostText.range.startLineNumber,\n                left: position\n            };\n            return pos;\n        });\n        this._text = derived(this, reader => {\n            const ghostText = this._model.read(reader);\n            if (!ghostText) {\n                return { text: '', shift: 0 };\n            }\n            const t = removeIndentation(ghostText.text.split('\\n'));\n            return {\n                text: t.text.join('\\n'),\n                shift: t.shift\n            };\n        });\n        this._originalModel = derivedDisposable(() => this._modelService.createModel('', null, InlineEditSideBySideWidget_1._createUniqueUri())).keepObserved(this._store);\n        this._modifiedModel = derivedDisposable(() => this._modelService.createModel('', null, InlineEditSideBySideWidget_1._createUniqueUri())).keepObserved(this._store);\n        this._diff = derived(this, reader => {\n            return this._diffPromise.read(reader)?.promiseResult.read(reader)?.data;\n        });\n        this._diffPromise = derived(this, reader => {\n            const ghostText = this._model.read(reader);\n            if (!ghostText) {\n                return;\n            }\n            const editorModel = this._editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const originalText = removeIndentation(editorModel.getValueInRange(ghostText.range).split('\\n')).text.join('\\n');\n            const modifiedText = removeIndentation(ghostText.text.split('\\n')).text.join('\\n');\n            this._originalModel.get().setValue(originalText);\n            this._modifiedModel.get().setValue(modifiedText);\n            const d = this._diffProviderFactoryService.createDiffProvider({ diffAlgorithm: 'advanced' });\n            return ObservablePromise.fromFn(async () => {\n                const result = await d.computeDiff(this._originalModel.get(), this._modifiedModel.get(), {\n                    computeMoves: false,\n                    ignoreTrimWhitespace: false,\n                    maxComputationTimeMs: 1000,\n                }, CancellationToken.None);\n                if (result.identical) {\n                    return undefined;\n                }\n                return result.changes;\n            });\n        });\n        this._register(autorunWithStore((reader, store) => {\n            /** @description setup content widget */\n            const model = this._model.read(reader);\n            if (!model) {\n                return;\n            }\n            if (this._position.get() === null) {\n                return;\n            }\n            const contentWidget = store.add(this._instantiationService.createInstance(InlineEditSideBySideContentWidget, this._editor, this._position, this._text.map(t => t.text), this._text.map(t => t.shift), this._diff));\n            _editor.addOverlayWidget(contentWidget);\n            store.add(toDisposable(() => _editor.removeOverlayWidget(contentWidget)));\n        }));\n    }\n};\nInlineEditSideBySideWidget = InlineEditSideBySideWidget_1 = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, IDiffProviderFactoryService),\n    __param(4, IModelService)\n], InlineEditSideBySideWidget);\nexport { InlineEditSideBySideWidget };\nlet InlineEditSideBySideContentWidget = class InlineEditSideBySideContentWidget extends Disposable {\n    static { InlineEditSideBySideContentWidget_1 = this; }\n    static { this.id = 0; }\n    constructor(_editor, _position, _text, _shift, _diff, _instantiationService) {\n        super();\n        this._editor = _editor;\n        this._position = _position;\n        this._text = _text;\n        this._shift = _shift;\n        this._diff = _diff;\n        this._instantiationService = _instantiationService;\n        this.id = `InlineEditSideBySideContentWidget${InlineEditSideBySideContentWidget_1.id++}`;\n        this.allowEditorOverflow = false;\n        this._nodes = $('div.inlineEditSideBySide', undefined);\n        this._scrollChanged = observableSignalFromEvent('editor.onDidScrollChange', this._editor.onDidScrollChange);\n        this._previewEditor = this._register(this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._nodes, {\n            glyphMargin: false,\n            lineNumbers: 'off',\n            minimap: { enabled: false },\n            guides: {\n                indentation: false,\n                bracketPairs: false,\n                bracketPairsHorizontal: false,\n                highlightActiveIndentation: false,\n            },\n            folding: false,\n            selectOnLineNumbers: false,\n            selectionHighlight: false,\n            columnSelection: false,\n            overviewRulerBorder: false,\n            overviewRulerLanes: 0,\n            lineDecorationsWidth: 0,\n            lineNumbersMinChars: 0,\n            scrollbar: { vertical: 'hidden', horizontal: 'hidden', alwaysConsumeMouseWheel: false, handleMouseWheel: false },\n            readOnly: true,\n            wordWrap: 'off',\n            wordWrapOverride1: 'off',\n            wordWrapOverride2: 'off',\n            wrappingIndent: 'none',\n            wrappingStrategy: undefined,\n        }, { contributions: [], isSimpleWidget: true }, this._editor));\n        this._previewEditorObs = observableCodeEditor(this._previewEditor);\n        this._editorObs = observableCodeEditor(this._editor);\n        this._previewTextModel = this._register(this._instantiationService.createInstance(TextModel, '', this._editor.getModel()?.getLanguageId() ?? PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null));\n        this._setText = derived(reader => {\n            const edit = this._text.read(reader);\n            if (!edit) {\n                return;\n            }\n            this._previewTextModel.setValue(edit);\n        }).recomputeInitiallyAndOnChange(this._store);\n        this._decorations = derived(this, (reader) => {\n            this._setText.read(reader);\n            const position = this._position.read(reader);\n            if (!position) {\n                return { org: [], mod: [] };\n            }\n            const diff = this._diff.read(reader);\n            if (!diff) {\n                return { org: [], mod: [] };\n            }\n            const originalDecorations = [];\n            const modifiedDecorations = [];\n            if (diff.length === 1 && diff[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange())) {\n                return { org: [], mod: [] };\n            }\n            const shift = this._shift.get();\n            const moveRange = (range) => {\n                return new Range(range.startLineNumber + position.top - 1, range.startColumn + shift, range.endLineNumber + position.top - 1, range.endColumn + shift);\n            };\n            for (const m of diff) {\n                if (!m.original.isEmpty) {\n                    originalDecorations.push({ range: moveRange(m.original.toInclusiveRange()), options: diffLineDeleteDecorationBackgroundWithIndicator });\n                }\n                if (!m.modified.isEmpty) {\n                    modifiedDecorations.push({ range: m.modified.toInclusiveRange(), options: diffLineAddDecorationBackgroundWithIndicator });\n                }\n                if (m.modified.isEmpty || m.original.isEmpty) {\n                    if (!m.original.isEmpty) {\n                        originalDecorations.push({ range: moveRange(m.original.toInclusiveRange()), options: diffWholeLineDeleteDecoration });\n                    }\n                    if (!m.modified.isEmpty) {\n                        modifiedDecorations.push({ range: m.modified.toInclusiveRange(), options: diffWholeLineAddDecoration });\n                    }\n                }\n                else {\n                    for (const i of m.innerChanges || []) {\n                        // Don't show empty markers outside the line range\n                        if (m.original.contains(i.originalRange.startLineNumber)) {\n                            originalDecorations.push({ range: moveRange(i.originalRange), options: i.originalRange.isEmpty() ? diffDeleteDecorationEmpty : diffDeleteDecoration });\n                        }\n                        if (m.modified.contains(i.modifiedRange.startLineNumber)) {\n                            modifiedDecorations.push({ range: i.modifiedRange, options: i.modifiedRange.isEmpty() ? diffAddDecorationEmpty : diffAddDecoration });\n                        }\n                    }\n                }\n            }\n            return { org: originalDecorations, mod: modifiedDecorations };\n        });\n        this._originalDecorations = derived(this, reader => {\n            return this._decorations.read(reader).org;\n        });\n        this._modifiedDecorations = derived(this, reader => {\n            return this._decorations.read(reader).mod;\n        });\n        this._previewEditor.setModel(this._previewTextModel);\n        this._register(this._editorObs.setDecorations(this._originalDecorations));\n        this._register(this._previewEditorObs.setDecorations(this._modifiedDecorations));\n        this._register(autorun(reader => {\n            const width = this._previewEditorObs.contentWidth.read(reader);\n            const lines = this._text.read(reader).split('\\n').length - 1;\n            const height = this._editor.getOption(67 /* EditorOption.lineHeight */) * lines;\n            if (width <= 0) {\n                return;\n            }\n            this._previewEditor.layout({ height: height, width: width });\n        }));\n        this._register(autorun(reader => {\n            /** @description update position */\n            this._position.read(reader);\n            this._editor.layoutOverlayWidget(this);\n        }));\n        this._register(autorun(reader => {\n            /** @description scroll change */\n            this._scrollChanged.read(reader);\n            const position = this._position.read(reader);\n            if (!position) {\n                return;\n            }\n            this._editor.layoutOverlayWidget(this);\n        }));\n    }\n    getId() { return this.id; }\n    getDomNode() {\n        return this._nodes;\n    }\n    getPosition() {\n        const position = this._position.get();\n        if (!position) {\n            return null;\n        }\n        const layoutInfo = this._editor.getLayoutInfo();\n        const visibPos = this._editor.getScrolledVisiblePosition(new Position(position.top, 1));\n        if (!visibPos) {\n            return null;\n        }\n        const top = visibPos.top - 1; //-1 to offset the border width\n        const offset = this._editor.getOffsetForColumn(position.left.lineNumber, position.left.column);\n        const left = layoutInfo.contentLeft + offset + 10;\n        return {\n            preference: {\n                left,\n                top,\n            }\n        };\n    }\n};\nInlineEditSideBySideContentWidget = InlineEditSideBySideContentWidget_1 = __decorate([\n    __param(5, IInstantiationService)\n], InlineEditSideBySideContentWidget);\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 886, "column": 0}, "map": {"version":3,"sources":["file:///Users/jloka/Documents/repos/personal/shared-workshop/node_modules/.pnpm/monaco-editor%400.52.2/node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/inlineEditController.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar InlineEditController_1;\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, constObservable, observableFromEvent, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { GhostTextWidget } from './ghostTextWidget.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { InlineEditTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { GhostText, GhostTextPart } from '../../inlineCompletions/browser/model/ghostText.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { InlineEditHintsWidget } from './inlineEditHintsWidget.js';\nimport { createStyleSheet2 } from '../../../../base/browser/dom.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\nimport { InlineEditSideBySideWidget } from './inlineEditSideBySideWidget.js';\nimport { IDiffProviderFactoryService } from '../../../browser/widget/diffEditor/diffProviderFactoryService.js';\nimport { IModelService } from '../../../common/services/model.js';\nlet InlineEditController = class InlineEditController extends Disposable {\n    static { InlineEditController_1 = this; }\n    static { this.ID = 'editor.contrib.inlineEditController'; }\n    static { this.inlineEditVisibleKey = 'inlineEditVisible'; }\n    static { this.inlineEditVisibleContext = new RawContextKey(this.inlineEditVisibleKey, false); }\n    static { this.cursorAtInlineEditKey = 'cursorAtInlineEdit'; }\n    static { this.cursorAtInlineEditContext = new RawContextKey(this.cursorAtInlineEditKey, false); }\n    static get(editor) {\n        return editor.getContribution(InlineEditController_1.ID);\n    }\n    constructor(editor, instantiationService, contextKeyService, languageFeaturesService, _commandService, _configurationService, _diffProviderFactoryService, _modelService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.contextKeyService = contextKeyService;\n        this.languageFeaturesService = languageFeaturesService;\n        this._commandService = _commandService;\n        this._configurationService = _configurationService;\n        this._diffProviderFactoryService = _diffProviderFactoryService;\n        this._modelService = _modelService;\n        this._isVisibleContext = InlineEditController_1.inlineEditVisibleContext.bindTo(this.contextKeyService);\n        this._isCursorAtInlineEditContext = InlineEditController_1.cursorAtInlineEditContext.bindTo(this.contextKeyService);\n        this._currentEdit = observableValue(this, undefined);\n        this._currentWidget = derivedDisposable(this._currentEdit, (reader) => {\n            const edit = this._currentEdit.read(reader);\n            if (!edit) {\n                return undefined;\n            }\n            const line = edit.range.endLineNumber;\n            const column = edit.range.endColumn;\n            const textToDisplay = edit.text.endsWith('\\n') && !(edit.range.startLineNumber === edit.range.endLineNumber && edit.range.startColumn === edit.range.endColumn) ? edit.text.slice(0, -1) : edit.text;\n            const ghostText = new GhostText(line, [new GhostTextPart(column, textToDisplay, false)]);\n            //only show ghost text for single line edits\n            //unless it is a pure removal\n            //multi line edits are shown in the side by side widget\n            const isSingleLine = edit.range.startLineNumber === edit.range.endLineNumber && ghostText.parts.length === 1 && ghostText.parts[0].lines.length === 1;\n            const isPureRemoval = edit.text === '';\n            if (!isSingleLine && !isPureRemoval) {\n                return undefined;\n            }\n            const instance = this.instantiationService.createInstance(GhostTextWidget, this.editor, {\n                ghostText: constObservable(ghostText),\n                minReservedLineCount: constObservable(0),\n                targetTextModel: constObservable(this.editor.getModel() ?? undefined),\n                range: constObservable(edit.range)\n            });\n            return instance;\n        });\n        this._isAccepting = observableValue(this, false);\n        this._enabled = observableFromEvent(this, this.editor.onDidChangeConfiguration, () => this.editor.getOption(63 /* EditorOption.inlineEdit */).enabled);\n        this._fontFamily = observableFromEvent(this, this.editor.onDidChangeConfiguration, () => this.editor.getOption(63 /* EditorOption.inlineEdit */).fontFamily);\n        //Automatically request inline edit when the content was changed\n        //Cancel the previous request if there is one\n        //Remove the previous ghost text\n        const modelChangedSignal = observableSignalFromEvent('InlineEditController.modelContentChangedSignal', editor.onDidChangeModelContent);\n        this._register(autorun(reader => {\n            /** @description InlineEditController.modelContentChanged model */\n            if (!this._enabled.read(reader)) {\n                return;\n            }\n            modelChangedSignal.read(reader);\n            if (this._isAccepting.read(reader)) {\n                return;\n            }\n            this.getInlineEdit(editor, true);\n        }));\n        //Check if the cursor is at the ghost text\n        const cursorPosition = observableFromEvent(this, editor.onDidChangeCursorPosition, () => editor.getPosition());\n        this._register(autorun(reader => {\n            /** @description InlineEditController.cursorPositionChanged model */\n            if (!this._enabled.read(reader)) {\n                return;\n            }\n            const pos = cursorPosition.read(reader);\n            if (pos) {\n                this.checkCursorPosition(pos);\n            }\n        }));\n        //Perform stuff when the current edit has changed\n        this._register(autorun((reader) => {\n            /** @description InlineEditController.update model */\n            const currentEdit = this._currentEdit.read(reader);\n            this._isCursorAtInlineEditContext.set(false);\n            if (!currentEdit) {\n                this._isVisibleContext.set(false);\n                return;\n            }\n            this._isVisibleContext.set(true);\n            const pos = editor.getPosition();\n            if (pos) {\n                this.checkCursorPosition(pos);\n            }\n        }));\n        //Clear suggestions on lost focus\n        const editorBlurSingal = observableSignalFromEvent('InlineEditController.editorBlurSignal', editor.onDidBlurEditorWidget);\n        this._register(autorun(async (reader) => {\n            /** @description InlineEditController.editorBlur */\n            if (!this._enabled.read(reader)) {\n                return;\n            }\n            editorBlurSingal.read(reader);\n            // This is a hidden setting very useful for debugging\n            if (this._configurationService.getValue('editor.experimentalInlineEdit.keepOnBlur') || editor.getOption(63 /* EditorOption.inlineEdit */).keepOnBlur) {\n                return;\n            }\n            this._currentRequestCts?.dispose(true);\n            this._currentRequestCts = undefined;\n            await this.clear(false);\n        }));\n        //Invoke provider on focus\n        const editorFocusSignal = observableSignalFromEvent('InlineEditController.editorFocusSignal', editor.onDidFocusEditorText);\n        this._register(autorun(reader => {\n            /** @description InlineEditController.editorFocus */\n            if (!this._enabled.read(reader)) {\n                return;\n            }\n            editorFocusSignal.read(reader);\n            this.getInlineEdit(editor, true);\n        }));\n        //handle changes of font setting\n        const styleElement = this._register(createStyleSheet2());\n        this._register(autorun(reader => {\n            const fontFamily = this._fontFamily.read(reader);\n            styleElement.setStyle(fontFamily === '' || fontFamily === 'default' ? `` : `\n.monaco-editor .inline-edit-decoration,\n.monaco-editor .inline-edit-decoration-preview,\n.monaco-editor .inline-edit {\n\tfont-family: ${fontFamily};\n}`);\n        }));\n        this._register(new InlineEditHintsWidget(this.editor, this._currentWidget, this.instantiationService));\n        this._register(new InlineEditSideBySideWidget(this.editor, this._currentEdit, this.instantiationService, this._diffProviderFactoryService, this._modelService));\n    }\n    checkCursorPosition(position) {\n        if (!this._currentEdit) {\n            this._isCursorAtInlineEditContext.set(false);\n            return;\n        }\n        const gt = this._currentEdit.get();\n        if (!gt) {\n            this._isCursorAtInlineEditContext.set(false);\n            return;\n        }\n        this._isCursorAtInlineEditContext.set(Range.containsPosition(gt.range, position));\n    }\n    validateInlineEdit(editor, edit) {\n        //Multiline inline replacing edit must replace whole lines\n        if (edit.text.includes('\\n') && edit.range.startLineNumber !== edit.range.endLineNumber && edit.range.startColumn !== edit.range.endColumn) {\n            const firstColumn = edit.range.startColumn;\n            if (firstColumn !== 1) {\n                return false;\n            }\n            const lastLine = edit.range.endLineNumber;\n            const lastColumn = edit.range.endColumn;\n            const lineLength = editor.getModel()?.getLineLength(lastLine) ?? 0;\n            if (lastColumn !== lineLength + 1) {\n                return false;\n            }\n        }\n        return true;\n    }\n    async fetchInlineEdit(editor, auto) {\n        if (this._currentRequestCts) {\n            this._currentRequestCts.dispose(true);\n        }\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelVersion = model.getVersionId();\n        const providers = this.languageFeaturesService.inlineEditProvider.all(model);\n        if (providers.length === 0) {\n            return;\n        }\n        const provider = providers[0];\n        this._currentRequestCts = new CancellationTokenSource();\n        const token = this._currentRequestCts.token;\n        const triggerKind = auto ? InlineEditTriggerKind.Automatic : InlineEditTriggerKind.Invoke;\n        const shouldDebounce = auto;\n        if (shouldDebounce) {\n            await wait(50, token);\n        }\n        if (token.isCancellationRequested || model.isDisposed() || model.getVersionId() !== modelVersion) {\n            return;\n        }\n        const edit = await provider.provideInlineEdit(model, { triggerKind }, token);\n        if (!edit) {\n            return;\n        }\n        if (token.isCancellationRequested || model.isDisposed() || model.getVersionId() !== modelVersion) {\n            return;\n        }\n        if (!this.validateInlineEdit(editor, edit)) {\n            return;\n        }\n        return edit;\n    }\n    async getInlineEdit(editor, auto) {\n        this._isCursorAtInlineEditContext.set(false);\n        await this.clear();\n        const edit = await this.fetchInlineEdit(editor, auto);\n        if (!edit) {\n            return;\n        }\n        this._currentEdit.set(edit, undefined);\n    }\n    async trigger() {\n        await this.getInlineEdit(this.editor, false);\n    }\n    async jumpBack() {\n        if (!this._jumpBackPosition) {\n            return;\n        }\n        this.editor.setPosition(this._jumpBackPosition);\n        //if position is outside viewports, scroll to it\n        this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition);\n    }\n    async accept() {\n        this._isAccepting.set(true, undefined);\n        const data = this._currentEdit.get();\n        if (!data) {\n            return;\n        }\n        //It should only happen in case of last line suggestion\n        let text = data.text;\n        if (data.text.startsWith('\\n')) {\n            text = data.text.substring(1);\n        }\n        this.editor.pushUndoStop();\n        this.editor.executeEdits('acceptCurrent', [EditOperation.replace(Range.lift(data.range), text)]);\n        if (data.accepted) {\n            await this._commandService\n                .executeCommand(data.accepted.id, ...(data.accepted.arguments || []))\n                .then(undefined, onUnexpectedExternalError);\n        }\n        this.freeEdit(data);\n        transaction((tx) => {\n            this._currentEdit.set(undefined, tx);\n            this._isAccepting.set(false, tx);\n        });\n    }\n    jumpToCurrent() {\n        this._jumpBackPosition = this.editor.getSelection()?.getStartPosition();\n        const data = this._currentEdit.get();\n        if (!data) {\n            return;\n        }\n        const position = Position.lift({ lineNumber: data.range.startLineNumber, column: data.range.startColumn });\n        this.editor.setPosition(position);\n        //if position is outside viewports, scroll to it\n        this.editor.revealPositionInCenterIfOutsideViewport(position);\n    }\n    async clear(sendRejection = true) {\n        const edit = this._currentEdit.get();\n        if (edit && edit?.rejected && sendRejection) {\n            await this._commandService\n                .executeCommand(edit.rejected.id, ...(edit.rejected.arguments || []))\n                .then(undefined, onUnexpectedExternalError);\n        }\n        if (edit) {\n            this.freeEdit(edit);\n        }\n        this._currentEdit.set(undefined, undefined);\n    }\n    freeEdit(edit) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        const providers = this.languageFeaturesService.inlineEditProvider.all(model);\n        if (providers.length === 0) {\n            return;\n        }\n        providers[0].freeInlineEdit(edit);\n    }\n};\nInlineEditController = InlineEditController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IContextKeyService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ICommandService),\n    __param(5, IConfigurationService),\n    __param(6, IDiffProviderFactoryService),\n    __param(7, IModelService)\n], InlineEditController);\nexport { InlineEditController };\nfunction wait(ms, cancellationToken) {\n    return new Promise(resolve => {\n        let d = undefined;\n        const handle = setTimeout(() => {\n            if (d) {\n                d.dispose();\n            }\n            resolve();\n        }, ms);\n        if (cancellationToken) {\n            d = cancellationToken.onCancellationRequested(() => {\n                clearTimeout(handle);\n                if (d) {\n                    d.dispose();\n                }\n                resolve();\n            });\n        }\n    });\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1271, "column": 0}, "map": {"version":3,"sources":["file:///Users/jloka/Documents/repos/personal/shared-workshop/node_modules/.pnpm/monaco-editor%400.52.2/node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/commands.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { inlineEditAcceptId, inlineEditJumpBackId, inlineEditJumpToId, inlineEditRejectId } from './commandIds.js';\nimport { InlineEditController } from './inlineEditController.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nexport class AcceptInlineEdit extends EditorAction {\n    constructor() {\n        super({\n            id: inlineEditAcceptId,\n            label: 'Accept Inline Edit',\n            alias: 'Accept Inline Edit',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineEditController.inlineEditVisibleContext),\n            kbOpts: [\n                {\n                    weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n                    primary: 2 /* KeyCode.Tab */,\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.writable, InlineEditController.inlineEditVisibleContext, InlineEditController.cursorAtInlineEditContext)\n                }\n            ],\n            menuOpts: [{\n                    menuId: MenuId.InlineEditToolbar,\n                    title: 'Accept',\n                    group: 'primary',\n                    order: 1,\n                }],\n        });\n    }\n    async run(accessor, editor) {\n        const controller = InlineEditController.get(editor);\n        await controller?.accept();\n    }\n}\nexport class TriggerInlineEdit extends EditorAction {\n    constructor() {\n        const activeExpr = ContextKeyExpr.and(EditorContextKeys.writable, ContextKeyExpr.not(InlineEditController.inlineEditVisibleKey));\n        super({\n            id: 'editor.action.inlineEdit.trigger',\n            label: 'Trigger Inline Edit',\n            alias: 'Trigger Inline Edit',\n            precondition: activeExpr,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 86 /* KeyCode.Equal */,\n                kbExpr: activeExpr\n            },\n        });\n    }\n    async run(accessor, editor) {\n        const controller = InlineEditController.get(editor);\n        controller?.trigger();\n    }\n}\nexport class JumpToInlineEdit extends EditorAction {\n    constructor() {\n        const activeExpr = ContextKeyExpr.and(EditorContextKeys.writable, InlineEditController.inlineEditVisibleContext, ContextKeyExpr.not(InlineEditController.cursorAtInlineEditKey));\n        super({\n            id: inlineEditJumpToId,\n            label: 'Jump to Inline Edit',\n            alias: 'Jump to Inline Edit',\n            precondition: activeExpr,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 86 /* KeyCode.Equal */,\n                kbExpr: activeExpr\n            },\n            menuOpts: [{\n                    menuId: MenuId.InlineEditToolbar,\n                    title: 'Jump To Edit',\n                    group: 'primary',\n                    order: 3,\n                    when: activeExpr\n                }],\n        });\n    }\n    async run(accessor, editor) {\n        const controller = InlineEditController.get(editor);\n        controller?.jumpToCurrent();\n    }\n}\nexport class JumpBackInlineEdit extends EditorAction {\n    constructor() {\n        const activeExpr = ContextKeyExpr.and(EditorContextKeys.writable, InlineEditController.cursorAtInlineEditContext);\n        super({\n            id: inlineEditJumpBackId,\n            label: 'Jump Back from Inline Edit',\n            alias: 'Jump Back from Inline Edit',\n            precondition: activeExpr,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */ + 10,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 86 /* KeyCode.Equal */,\n                kbExpr: activeExpr\n            },\n            menuOpts: [{\n                    menuId: MenuId.InlineEditToolbar,\n                    title: 'Jump Back',\n                    group: 'primary',\n                    order: 3,\n                    when: activeExpr\n                }],\n        });\n    }\n    async run(accessor, editor) {\n        const controller = InlineEditController.get(editor);\n        controller?.jumpBack();\n    }\n}\nexport class RejectInlineEdit extends EditorAction {\n    constructor() {\n        const activeExpr = ContextKeyExpr.and(EditorContextKeys.writable, InlineEditController.inlineEditVisibleContext);\n        super({\n            id: inlineEditRejectId,\n            label: 'Reject Inline Edit',\n            alias: 'Reject Inline Edit',\n            precondition: activeExpr,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 9 /* KeyCode.Escape */,\n                kbExpr: activeExpr\n            },\n            menuOpts: [{\n                    menuId: MenuId.InlineEditToolbar,\n                    title: 'Reject',\n                    group: 'secondary',\n                    order: 2,\n                }],\n        });\n    }\n    async run(accessor, editor) {\n        const controller = InlineEditController.get(editor);\n        await controller?.clear();\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1432, "column": 0}, "map": {"version":3,"sources":["file:///Users/jloka/Documents/repos/personal/shared-workshop/node_modules/.pnpm/monaco-editor%400.52.2/node_modules/monaco-editor/esm/vs/editor/contrib/inlineEdit/browser/inlineEdit.contribution.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\n// import { HoverParticipantRegistry } from 'vs/editor/contrib/hover/browser/hoverTypes';\nimport { AcceptInlineEdit, JumpBackInlineEdit, JumpToInlineEdit, RejectInlineEdit, TriggerInlineEdit } from './commands.js';\n// import { InlineEditHoverParticipant } from 'vs/editor/contrib/inlineEdit/browser/hoverParticipant';\nimport { InlineEditController } from './inlineEditController.js';\nregisterEditorAction(AcceptInlineEdit);\nregisterEditorAction(RejectInlineEdit);\nregisterEditorAction(JumpToInlineEdit);\nregisterEditorAction(JumpBackInlineEdit);\nregisterEditorAction(TriggerInlineEdit);\nregisterEditorContribution(InlineEditController.ID, InlineEditController, 3 /* EditorContributionInstantiation.Eventually */);\n// HoverParticipantRegistry.register(InlineEditHoverParticipant);\n"],"names":[],"mappings":"AAAA;;;8FAG8F;AAC9F;AACA,yFAAyF;AACzF;AACA,sGAAsG;AACtG;;;;AACA,CAAA,GAAA,oPAAA,CAAA,uBAAoB,AAAD,EAAE,qQAAA,CAAA,mBAAgB;AACrC,CAAA,GAAA,oPAAA,CAAA,uBAAoB,AAAD,EAAE,qQAAA,CAAA,mBAAgB;AACrC,CAAA,GAAA,oPAAA,CAAA,uBAAoB,AAAD,EAAE,qQAAA,CAAA,mBAAgB;AACrC,CAAA,GAAA,oPAAA,CAAA,uBAAoB,AAAD,EAAE,qQAAA,CAAA,qBAAkB;AACvC,CAAA,GAAA,oPAAA,CAAA,uBAAoB,AAAD,EAAE,qQAAA,CAAA,oBAAiB;AACtC,CAAA,GAAA,oPAAA,CAAA,6BAA0B,AAAD,EAAE,iRAAA,CAAA,uBAAoB,CAAC,EAAE,EAAE,iRAAA,CAAA,uBAAoB,EAAE,EAAE,8CAA8C,MAC1H,iEAAiE","ignoreList":[0],"debugId":null}}]
}